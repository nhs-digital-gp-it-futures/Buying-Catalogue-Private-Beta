!function P(F,e){var j=F.document;!function(a){"use strict";var d,h,r,p,m,i={".js":[],".json":[],".css":[],".html":[]},u="function"==typeof require?require:null;return p=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},m=function(e,t,n){var o,r;if("function"==typeof e[t+n])return t+n;for(o=0;r=i[n][o];++o)if("function"==typeof e[t+r])return t+r;return null},d=function(e,t,n,o,r,i){var s,l,a,u,c,f;for("."!==(s=(n=n.split(/[\\/]/)).pop())&&".."!==s||(n.push(s),s="");null!=(l=n.shift());)if(l&&"."!==l&&(".."===l?(e=t.pop(),i=i.slice(0,i.lastIndexOf("/"))):(t.push(e),e=e[l],i+="/"+l),!e))throw p(o);if(s&&"function"!=typeof e[s]&&((f=m(e,s,".js"))||(f=m(e,s,".json")),f||(f=m(e,s,".css")),f||(f=m(e,s,".html")),f?s=f:2!==r&&"object"==typeof e[s]&&(t.push(e),e=e[s],i+="/"+s,s="")),!s)return 1!==r&&e[":mainpath:"]?d(e,t,e[":mainpath:"],o,1,i):d(e,t,"index",o,2,i);if(!(c=e[s]))throw p(o);return c.hasOwnProperty("module")?c.module.exports:(a={},c.module=u={exports:a,id:i+"/"+s},c.call(a,a,u,h(e,t,i)),u.exports)},r=function(e,t,n,o){var r,i=n,s=n.charAt(0),l=0;if("/"===s){if(i=i.slice(1),!(e=a["/"])){if(u)return u(n);throw p(n)}o="/",t=[]}else if("."!==s){if(r=i.split("/",1)[0],!(e=a[r])){if(u)return u(n);throw p(n)}o=r,t=[],(i=i.slice(r.length+1))||(l=(i=e[":mainpath:"])?1:(i="index",2))}return d(e,t,i,n,l,o)},(h=function(t,n,o){return function(e){return r(t,[].concat(n),e,o)}})(a,[],"")}({"testcafe-release":{src:{client:{automation:{"cursor.js":function(e,t,n){e.__esModule=!0;var o=i(n("./deps/testcafe-core")),r=i(n("./deps/testcafe-ui"));function i(e){return e&&e.__esModule?e:{default:e}}var s=o.default.domUtils,l=F.top===F?r.default.cursorUI:r.default.iframeCursorUI;e.default={x:-1,y:-1,currentActiveWindow:F.top,_ensureActiveWindow:function(){if(this.currentActiveWindow!==F&&this.currentActiveWindow!==F.parent){var e=s.findIframeByWindow(this.currentActiveWindow);e&&s.isElementInDocument(e)||(this.currentActiveWindow=F)}},get active(){return this._ensureActiveWindow(),this.currentActiveWindow===F},set activeWindow(e){this.currentActiveWindow=e},get activeWindow(){return this._ensureActiveWindow(),this.currentActiveWindow},get position(){return{x:this.x,y:this.y}},get visible(){return F.top===F&&l.isVisible()},move:function(e,t){return this.x=e,this.y=t,l.move(this.x,this.y)},hide:function(){this.visible&&l.hide()},show:function(){F.top===F&&l.show()},leftButtonDown:function(){return l.leftButtonDown()},rightButtonDown:function(){return l.rightButtonDown()},buttonUp:function(){return l.buttonUp()}},t.exports=e.default},deps:{"hammerhead.js":function(e,t,n){e.__esModule=!0,e.default=F["%hammerhead%"],t.exports=e.default},"testcafe-core.js":function(e,t,n){e.__esModule=!0,e.default=F["%testCafeCore%"],t.exports=e.default},"testcafe-ui.js":function(e,t,n){e.__esModule=!0,e.default=F["%testCafeUI%"],t.exports=e.default}},"errors.js":function(e,t,n){e.__esModule=!0,e.default={elementIsInvisibleError:"elementIsInvisibleError",foundElementIsNotTarget:"foundElementIsNotTarget"},t.exports=e.default},"get-element.js":function(e,t,n){e.__esModule=!0,e.fromPoint=E,e.underCursor=function(){var e=s.default.position;return E(e.x,e.y).then(function(e){var t=e.element;return t})};var o=l(n("./deps/hammerhead")),r=l(n("./deps/testcafe-core")),i=l(n("./deps/testcafe-ui")),s=l(n("./cursor"));function l(e){return e&&e.__esModule?e:{default:e}}var u=o.default.utils.browser,a=o.default.Promise,c=o.default.nativeMethods,f=r.default.positionUtils,d=r.default.domUtils;function h(e,t,n){var o=null;return i.default.hide(n).then(function(){return o=f.getElementFromPoint(e,t),i.default.show(n)}).then(function(){return o})}function p(e,t,n){var o=f.getElementFromPoint(e,t),r=d.containsElement(n,o)&&c.nodeTextContentGetter.call(o).length;return o&&o===n||r?o:null}function m(e,t){if(!t||!d.isDomElement(t)||!e||e===t)return e;if("tref"===d.getTagName(t))return t;var n,o,r,i="area"===d.getTagName(t)&&d.isImgElement(e);if(u.isFirefox&&i)return n=e,o=t,(r=d.closest(o,"map"))&&r.name===n.useMap.substring(1)?o:n;var s=d.isAnchorElement(t)||d.getParents(t,"a").length,l=s&&d.containsElement(t,e)&&c.nodeTextContentGetter.call(e).length;if(!s||l||!c.nodeTextContentGetter.call(t).length)return e;var a=t.getBoundingClientRect();return p(a.right-1,a.top+1,t)||p(a.left+1,a.bottom-1,t)||e}function E(n,o,r){var i=F!==F.top,s=null;return h(n,o).then(function(e){s=e;var t=a.resolve(e);return!s&&i&&0<n&&0<o&&(t=t.then(function(){return h(n,o,!0)}).then(function(e){return s=e})),t.then(function(e){return m(e,r)}).then(function(e){return{element:e,corrected:e!==s}})})}},"index.js":function(e,t,n){var o=A(n("./deps/hammerhead")),r=A(n("./playback/scroll")),i=A(n("./playback/click")),s=A(n("./playback/click/select-child")),l=A(n("./playback/dblclick")),a=A(n("./playback/drag/to-offset")),u=A(n("./playback/drag/to-element")),c=A(n("./playback/hover")),f=A(n("./playback/press")),d=A(n("./playback/rclick")),h=A(n("./playback/select/select-text")),p=A(n("./playback/select/select-editable-content")),m=A(n("./playback/type")),E=A(n("./playback/upload")),g=n("../../test-run/commands/options"),v=A(n("./settings")),y=n("./utils/offsets"),S=n("./playback/press/utils"),b=A(n("./playback/select/calculate-select-text-arguments")),_=A(n("./errors")),T=A(n("./cursor"));function A(e){return e&&e.__esModule?e:{default:e}}e.Scroll=r.default,e.Click=i.default,e.SelectChildClick=s.default,e.DblClick=l.default,e.DragToOffset=a.default,e.DragToElement=u.default,e.Hover=c.default,e.Press=f.default,e.RClick=d.default,e.SelectText=h.default,e.SelectEditableContent=p.default,e.Type=m.default,e.Upload=E.default,e.MouseOptions=g.MouseOptions,e.ClickOptions=g.ClickOptions,e.TypeOptions=g.TypeOptions,e.ERROR_TYPES=_.default,e.AutomationSettings=v.default,e.getOffsetOptions=y.getOffsetOptions,e.calculateSelectTextArguments=b.default,e.cursor=T.default,e.getNextFocusableElement=S.getNextFocusableElement,e.get=n;var x=o.default.nativeMethods,w=o.default.EVENTS.evalIframeScript;x.objectDefineProperty(F,"%testCafeAutomation%",{configurable:!0,value:e}),o.default.on(w,function(e){return P(x.contentWindowGetter.call(e.iframe),!0)})},playback:{click:{"index.js":function(e,t,n){e.__esModule=!0;var o=c(n("../../deps/hammerhead")),r=c(n("../../deps/testcafe-core")),i=c(n("../../deps/testcafe-ui")),s=c(n("../visible-element-automation")),l=n("../../utils/utils"),a=c(n("../../cursor")),u=c(n("../../utils/next-tick"));function c(e){return e&&e.__esModule?e:{default:e}}var f=o.default.Promise,d=o.default.utils.extend,h=o.default.utils.browser,p=o.default.utils.featureDetection,m=o.default.eventSandbox.eventSimulator,E=r.default.domUtils,g=r.default.styleUtils,v=r.default.eventUtils,y=r.default.arrayUtils,S=r.default.delay,b=i.default.selectElement,_=function(o){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.modifiers=t.modifiers,n.caretPos=t.caretPos,n.targetElementParentNodes=[],n.activeElementBeforeMouseDown=null,n.mouseDownElement=null,n.eventState={mousedownPrevented:!1,blurRaised:!1,simulateDefaultBehavior:!0,clickElement:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o),r.prototype._bindMousedownHandler=function(){var n=this;v.bind(this.element,"mousedown",function e(t){n.eventState.mousedownPrevented=t.defaultPrevented,v.preventDefault(t),v.unbind(n.element,"mousedown",e)})},r.prototype._bindBlurHandler=function(t){var n=this;v.bind(t,"blur",function e(){n.eventState.blurRaised=!0,v.unbind(t,"blur",e,!0)},!0)},r.prototype._bindClickHandler=function(n){v.bind(n,"click",function e(t){v.preventDefault(t,!0),v.unbind(n,"click",e)})},r.prototype._raiseTouchEvents=function(e){p.isTouchDevice&&(m.touchstart(e.element,e.options),m.touchend(e.element,e.options))},r.prototype._mousedown=function(n){var o=this;return this.targetElementParentNodes=E.getParents(n.element),this.mouseDownElement=n.element,a.default.leftButtonDown().then(function(){o._raiseTouchEvents(n);var e=E.getActiveElement();o.activeElementBeforeMouseDown=e;var t=(h.isWebKit||h.isIE)&&E.isSelectElement(o.mouseDownElement);return t&&o._bindMousedownHandler(),o._bindBlurHandler(e),o.eventState.simulateDefaultBehavior=m.mousedown(n.element,n.options),!1===o.eventState.simulateDefaultBehavior&&(o.eventState.simulateDefaultBehavior=t&&!o.eventState.mousedownPrevented),o._ensureActiveElementBlur(e)}).then(function(){return o._focus(n)})},r.prototype._ensureActiveElementBlur=function(t){var n=this;return new f(function(e){E.getActiveElement()===t||n.eventState.blurRaised?e():h.isIE&&h.version<12?(0,u.default)().then(function(){n.eventState.blurRaised||m.blur(t),e()}):(m.blur(t),e())})},r.prototype._focus=function(e){if(!1===this.eventState.simulateDefaultBehavior)return f.resolve();var t=E.isContentEditableElement(this.element)?this.element:e.element,n=!h.isIE||this.activeElementBeforeMouseDown===E.getActiveElement();return(0,l.focusAndSetSelection)(t,n,this.caretPos)},r._getElementForClick=function(e,t,n){var o=E.getParents(t),r=E.isTheSameNode(t,e);return h.isFirefox?r?e:null:r?y.equals(n,o)?e:null:e.contains(t)&&!E.isEditableFormElement(t)?e:t.contains(e)?t:y.getCommonElement(o,n)},r.prototype._mouseup=function(t){var n=this;return a.default.buttonUp().then(function(){return n._getElementForEvent(t)}).then(function(e){t.element=e,n.eventState.clickElement=r._getElementForClick(n.mouseDownElement,e,n.targetElementParentNodes),m.mouseup(e,t.options)})},r.prototype._click=function(e){if(E.isOptionElement(e.element))return e.element;if(this.eventState.clickElement){var t=E.isInputElement(this.eventState.clickElement)&&"color"===this.eventState.clickElement.type;h.isFirefox&&t&&this._bindClickHandler(this.eventState.clickElement),m.click(this.eventState.clickElement,e.options)}return E.isElementFocusable(e.element)||(0,l.focusByRelatedElement)(e.element),E.isSelectElement(e.element)&&1===g.getSelectElementSize(e.element)&&!1!==this.eventState.simulateDefaultBehavior&&(b.isOptionListExpanded(e.element)?b.collapseOptionList():b.expandOptionList(e.element)),e},r.prototype.run=function(e){var i=this,s=null;return this._ensureElement(e).then(function(e){var t=e.element,n=e.clientPoint,o=e.screenPoint,r=e.devicePoint;return s={point:n,screenPoint:o,element:t,options:d({clientX:n.x,clientY:n.y,screenX:r.x,screenY:r.y},i.modifiers)},f.all([S(i.automationSettings.mouseActionStepDelay),i._mousedown(s)])}).then(function(){return i._mouseup(s)}).then(function(){return i._click(s)})},r}(s.default);e.default=_,t.exports=e.default},"select-child.js":function(e,t,n){e.__esModule=!0;var o=s(n("../../deps/hammerhead")),r=s(n("../../deps/testcafe-core")),i=s(n("../../deps/testcafe-ui")),l=s(n("../move")),a=n("../../../../test-run/commands/options"),u=n("../../utils/offsets"),c=s(n("../../settings"));function s(e){return e&&e.__esModule?e:{default:e}}var f=o.default.Promise,d=o.default.utils.browser,h=o.default.utils.featureDetection,p=o.default.eventSandbox.eventSimulator,m=o.default.eventSandbox.focusBlur,E=r.default.domUtils,g=r.default.styleUtils,v=r.default.delay,y=i.default.selectElement,S=h.isTouchDevice?0:160,b=function(){function s(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.element=e,this.modifiers=t.modifiers,this.caretPos=t.caretPos,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.speed=t.speed,this.automationSettings=new c.default(t.speed),this.parentSelect=E.getSelectParent(this.element),this.optionListExpanded=!!this.parentSelect&&y.isOptionListExpanded(this.parentSelect),this.childIndex=null,this.clickCausesChange=!1,this.parentSelect){var n=E.isOptionElement(this.element),o=this.parentSelect.selectedIndex;this.childIndex=E.getElementIndexInParent(this.parentSelect,this.element);var r=E.isOptionGroupElement(this.element.parentNode)?this.element.parentNode:null,i=this.element.disabled||r&&r.disabled;this.clickCausesChange=n&&!i&&this.childIndex!==o}this.eventsArgs={options:this.modifiers,element:this.element}}return s.prototype._calculateEventArguments=function(){var e=this.optionListExpanded?y.getEmulatedChildElement(this.element):this.element,t=1<g.getSelectElementSize(this.parentSelect);return{options:this.modifiers,element:d.isIE&&t?this.parentSelect:e}},s.prototype._getMoveArguments=function(){var e=null,t=null,n=null;if(this.optionListExpanded){e=y.getEmulatedChildElement(this.element);var o=(0,u.getDefaultAutomationOffsets)(e);t=o.offsetX,n=o.offsetY}else{e=j.documentElement;var r=y.getSelectChildCenter(this.element);t=r.x,n=r.y}return{element:e,offsetX:t,offsetY:n,speed:this.speed}},s.prototype._move=function(e){var t=this,n=e.element,o=e.offsetX,r=e.offsetY,i=e.speed,s=new a.MoveOptions({offsetX:o,offsetY:r,speed:i,modifiers:this.modifiers},!1);return new l.default(n,s).run().then(function(){return v(t.automationSettings.mouseActionStepDelay)})},s.prototype._mousedown=function(){var e=this;return d.isFirefox?(p.mousedown(this.eventsArgs.element,this.eventsArgs.options),this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex),this._focus()):d.isIE?(p.mousedown(this.eventsArgs.element,this.eventsArgs.options),this._focus()):this._focus().then(function(){return v(S)}).then(function(){p.mousedown(e.eventsArgs.element,e.eventsArgs.options),e.clickCausesChange&&(e.parentSelect.selectedIndex=e.childIndex)})},s.prototype._focus=function(){var t=this;return new f(function(e){m.focus(t.parentSelect,e,!1,!0)})},s.prototype._mouseup=function(){var e=d.isIE?this.parentSelect:this.eventsArgs.element;p.mouseup(e,this.eventsArgs.options),d.isIE&&this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex);var t=d.isFirefox||d.isSafari||d.isChrome&&53<=d.version,n=t||d.isIE;return t&&this.clickCausesChange&&p.input(this.parentSelect),n&&this.clickCausesChange&&p.change(this.parentSelect),f.resolve()},s.prototype._click=function(){p.click(this.eventsArgs.element,this.eventsArgs.options)},s.prototype.run=function(){var e=this;if(!this.parentSelect)return p.click(this.eventsArgs.element,this.eventsArgs.options),f.resolve();this.optionListExpanded||y.scrollOptionListByChild(this.element);var t=this._getMoveArguments();return this.eventsArgs=this._calculateEventArguments(),g.getSelectElementSize(this.parentSelect)<=1?this._move(t).then(function(){return e._click()}):this._move(t).then(function(){return e._mousedown()}).then(function(){return e._mouseup()}).then(function(){return e._click()})},s}();e.default=b,t.exports=e.default}},"dblclick.js":function(e,t,n){e.__esModule=!0;var o=u(n("../deps/hammerhead")),r=u(n("../deps/testcafe-core")),i=n("../../../test-run/commands/options"),s=u(n("./visible-element-automation")),l=u(n("./click")),a=u(n("../settings"));function u(e){return e&&e.__esModule?e:{default:e}}var c=o.default.utils.featureDetection,f=o.default.utils.browser,d=o.default.eventSandbox.eventSimulator,h=r.default.eventUtils,p=r.default.delay,m=c.isTouchDevice?0:160,E=function(o){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.modifiers=t.modifiers,n.caretPos=t.caretPos,n.speed=t.speed,n.automationSettings=new a.default(n.speed),n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.eventArgs=null,n.eventState={dblClickElement:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o),r.prototype._firstClick=function(e){var t=this,n=new i.ClickOptions(this.options);n.speed=1;var o=new l.default(this.element,n);return o.on(o.TARGET_ELEMENT_FOUND_EVENT,function(e){return t.emit(t.TARGET_ELEMENT_FOUND_EVENT,e)}),o.run(e).then(function(e){return p(m).then(function(){return e})})},r.prototype._secondClick=function(e){var t=this;f.isIE&&h.bind(j,"focus",h.preventDefault,!0);var n=new i.ClickOptions({offsetX:e.screenPoint.x,offsetY:e.screenPoint.y,caretPos:this.caretPos,modifiers:this.modifiers,speed:1}),o=new l.default(j.documentElement,n);return o.run().then(function(e){return t.eventState.dblClickElement=o.eventState.clickElement,f.isIE&&h.unbind(j,"focus",h.preventDefault,!0),e})},r.prototype._dblClick=function(e){this.eventState.dblClickElement&&d.dblclick(this.eventState.dblClickElement,e.options)},r.prototype.run=function(e){var t=this;return this._firstClick(e).then(function(e){return t._secondClick(e)}).then(function(e){return t._dblClick(e)})},r}(s.default);e.default=E,t.exports=e.default},drag:{"base.js":function(e,t,n){e.__esModule=!0;var o=i(n("../../deps/hammerhead")),s=n("../../deps/testcafe-core"),l=n("../../get-element"),r=i(n("../visible-element-automation")),a=i(n("../move")),u=n("../../../../test-run/commands/options"),c=i(n("../../cursor"));function i(e){return e&&e.__esModule?e:{default:e}}var f=o.default.Promise,d=o.default.utils.extend,h=o.default.utils.featureDetection,p=o.default.eventSandbox.eventSimulator,m=o.default.eventSandbox.focusBlur,E=function(o){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.modifiers=t.modifiers,n.speed=t.speed,n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.endPoint=null,n.simulateDefaultBehavior=!0,n.downEvent=h.isTouchDevice?"touchstart":"mousedown",n.upEvent=h.isTouchDevice?"touchend":"mouseup",n.dragAndDropState=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o),r.prototype._getEndPoint=function(){throw new Error("Not implemented")},r.prototype._mousedown=function(e){var t=this;return c.default.leftButtonDown().then(function(){return t.simulateDefaultBehavior=p[t.downEvent](e.element,e.options),t._focus(e)})},r.prototype._focus=function(n){var o=this;return new f(function(e){var t=s.domUtils.isContentEditableElement(o.element)?s.contentEditable.findContentEditableParent(o.element):n.element;m.focus(t,e,!1,!0)})},r.prototype._getDestination=function(){throw new Error("Not implemented")},r.prototype._drag=function(){var t=this,e=this._getDestination(),n=e.element,o=e.offsets,r=e.endPoint;this.endPoint=r;var i=new u.MoveOptions({offsetX:o.offsetX,offsetY:o.offsetY,modifiers:this.modifiers,speed:this.speed,minMovingTime:25,holdLeftButton:!0,skipDefaultDragBehavior:!1===this.simulateDefaultBehavior},!1);return new a.default(n,i).run().then(function(e){return t.dragAndDropState=e,(0,s.delay)(t.automationSettings.mouseActionStepDelay)})},r.prototype._mouseup=function(){var i=this;return c.default.buttonUp().then(function(){var n=s.positionUtils.offsetToClientCoords(i.endPoint),o=null,r=d({clientX:n.x,clientY:n.y},i.modifiers);return(0,l.fromPoint)(n.x,n.y).then(function(e){var t=e.element;return(o=t)?(i.dragAndDropState.enabled?(r.dataTransfer=i.dragAndDropState.dataTransfer,i.dragAndDropState.dropAllowed&&p.drop(o,r),p.dragend(i.dragAndDropState.element,r),i.dragAndDropState.dataStore.setProtectedMode()):p[i.upEvent](o,r),(0,l.fromPoint)(n.x,n.y)):o}).then(function(e){var t=e.element;o&&t===o&&!i.dragAndDropState.enabled&&p.click(o,r)})})},r.prototype.run=function(e){var o=this,r=null;return this._ensureElement(e).then(function(e){var t=e.element,n=e.clientPoint;return r={point:n,element:t,options:d({clientX:n.x,clientY:n.y},o.modifiers)},f.all([(0,s.delay)(o.automationSettings.mouseActionStepDelay),o._mousedown(r)])}).then(function(){return o._drag()}).then(function(){return o._mouseup()})},r}(r.default);e.default=E,t.exports=e.default},"drag-and-drop-state.js":function(e,t,n){e.__esModule=!0,e.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=!1,this.dropAllowed=!1,this.element=null,this.dataTransfer=null,this.dataStore=null},t.exports=e.default},"to-element.js":function(e,t,n){e.__esModule=!0;var o=i(n("../../deps/testcafe-core")),r=i(n("./base")),s=n("../../utils/offsets");function i(e){return e&&e.__esModule?e:{default:e}}var l=o.default.positionUtils,a=function(r){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,n));return o.destinationElement=t,o.destinationOffsetX=n.destinationOffsetX,o.destinationOffsetY=n.destinationOffsetY,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r),i.prototype._getDestination=function(){var e=this.destinationElement,t=l.getElementRectangle(e),n=(0,s.getOffsetOptions)(e,this.destinationOffsetX,this.destinationOffsetY);return{element:e,offsets:n,endPoint:{x:t.left+n.offsetX,y:t.top+n.offsetY}}},i}(r.default);e.default=a,t.exports=e.default},"to-offset.js":function(e,t,n){e.__esModule=!0;var o=i(n("../../deps/testcafe-core")),r=i(n("./base")),l=i(n("../../utils/get-automation-point"));function i(e){return e&&e.__esModule?e:{default:e}}var a=o.default.styleUtils,s=function(i){function s(e,t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,o));return r.dragOffsetX=t,r.dragOffsetY=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i),s.prototype._getDestination=function(){var e=(0,l.default)(this.element,this.offsetX,this.offsetY),t=a.getWidth(j),n=a.getHeight(j),o={x:e.x+this.dragOffsetX,y:e.y+this.dragOffsetY};return o={x:Math.min(Math.max(0,o.x),t),y:Math.min(Math.max(0,o.y),n)},{element:j.documentElement,offsets:{offsetX:o.x,offsetY:o.y},endPoint:o}},s}(r.default);e.default=s,t.exports=e.default}},"hover.js":function(e,t,n){e.__esModule=!0;var o,r=n("./visible-element-automation"),i=function(n){function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o.prototype.run=function(e){return this._ensureElement(e,!0)},o}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=i,t.exports=e.default},move:{"event-sequence":{"base.js":function(e,t,n){e.__esModule=!0;var o,r=n("../../../deps/hammerhead"),i=(o=r)&&o.__esModule?o:{default:o},d=n("../../../deps/testcafe-core"),h=i.default.utils.browser,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dragAndDropMode=!1,this.dropAllowed=!1}return e.prototype.setup=function(){this.dragAndDropMode=!1,this.dropAllowed=!1},e.prototype.leaveElement=function(){},e.prototype.move=function(){},e.prototype.enterElement=function(){},e.prototype.dragAndDrop=function(){},e.prototype.teardown=function(){},e.prototype.run=function(e,t,n,o,r,i){var s=t&&d.domUtils.isElementInDocument(t),l=t&&d.domUtils.isElementInIframe(t)&&!d.domUtils.getIframeByElement(t);s&&!l||(t=null);var a=e!==t,u=a?d.domUtils.getCommonAncestor(e,t):null;this.setup(),a&&t&&this.leaveElement(e,t,u,n),h.isIE&&this.move(e,n,o),a&&d.domUtils.isElementInDocument(e)&&this.enterElement(e,t,u,n),h.isIE||this.move(e,n,o),this.dragAndDrop(r,e,t,n,i),this.teardown(e,n,t,o);var c=this.dragAndDropMode,f=this.dropAllowed;return this.dragAndDropMode=!1,this.dropAllowed=!1,{dragAndDropMode:c,dropAllowed:f}},e}();e.default=s,t.exports=e.default},"drag-and-drop-first-move.js":function(e,t,n){e.__esModule=!0;var o=s(n("../../../deps/hammerhead")),r=s(n("./base")),i=s(n("./index")),l=s(n("./drag-and-drop-move"));function s(e){return e&&e.__esModule?e:{default:e}}var a=o.default.eventSandbox.eventSimulator,u=function(s){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s),e.prototype.setup=function(){s.prototype.setup.call(this),this.dragAndDropMode=!0},e.prototype.leaveElement=function(){i.default.leaveElement.apply(this,arguments)},e.prototype.move=function(){i.default.move.apply(this,arguments)},e.prototype.enterElement=function(){i.default.enterElement.apply(this,arguments)},e.prototype.dragAndDrop=function(e,t,n,o,r){var i=a.dragstart(e,o);r.setReadOnlyMode(),i?l.default.dragAndDrop.apply(this,arguments):this.dragAndDropMode=!1},e.prototype.run=function(e,t,n,o,r,i){return s.prototype.run.call(this,e,null,n,o,r,i)},e}(r.default);e.default=new u,t.exports=e.default},"drag-and-drop-move.js":function(e,t,n){e.__esModule=!0;var o=s(n("../../../deps/hammerhead")),r=n("../../../deps/testcafe-core"),i=s(n("./base"));function s(e){return e&&e.__esModule?e:{default:e}}var l=o.default.eventSandbox.eventSimulator,a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setup=function(){e.prototype.setup.call(this),this.dragAndDropMode=!0},t.prototype.dragAndDrop=function(e,t,n,o){l.drag(e,o),t!==n&&(r.domUtils.isElementInDocument(t)&&(o.relatedTarget=n,l.dragenter(t,o)),n&&(o.relatedTarget=t,l.dragleave(n,o))),this.dropAllowed=!l.dragover(t,o)},t}(i.default);e.default=new a,t.exports=e.default},"index.js":function(e,t,n){e.__esModule=!0;var o=s(n("../../../deps/hammerhead")),r=n("../../../deps/testcafe-core"),i=s(n("./base"));function s(e){return e&&e.__esModule?e:{default:e}}var l=o.default.eventSandbox.eventSimulator,a=o.default.utils.extend,u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.leaveElement=function(e,t,n,o){l.mouseout(t,a({relatedTarget:e},o));for(var r=t;r&&r!==n;)l.mouseleave(r,a({relatedTarget:e},o)),r=r.parentNode},t.prototype.move=function(e,t,n){l[n](e,t)},t.prototype.enterElement=function(e,t,n,o){l.mouseover(e,a({relatedTarget:t},o));for(var r=e,i=[];r&&r!==n;)i.push(r),r=r.parentNode;i.reverse();for(var s=0;s<i.length;s++)l.mouseenter(i[s],a({relatedTarget:t},o))},t.prototype.teardown=function(e,t,n,o){r.domUtils.isElementInDocument(e)&&e!==n&&l[o](e,t)},t}(i.default);e.default=new u,t.exports=e.default}},"index.js":function(e,t,n){e.__esModule=!0;var o=h(n("../../deps/hammerhead")),r=h(n("../../deps/testcafe-core")),p=n("../../../../test-run/commands/options"),i=h(n("../scroll")),m=h(n("../../cursor")),a=n("../../get-element"),s=h(n("../../utils/get-automation-point")),E=h(n("../../utils/get-line-rect-intersection")),l=h(n("../../utils/get-device-point")),u=h(n("../../utils/next-tick")),c=h(n("../../settings")),f=h(n("../drag/drag-and-drop-state")),d=h(n("./event-sequence")),g=h(n("./event-sequence/drag-and-drop-move")),v=h(n("./event-sequence/drag-and-drop-first-move"));function h(e){return e&&e.__esModule?e:{default:e}}var y=o.default.Promise,S=o.default.nativeMethods,b=o.default.utils.featureDetection,_=o.default.utils.html,T=o.default.utils.url,A=o.default.eventSandbox.eventSimulator,x=o.default.eventSandbox.message,w=o.default.eventSandbox.DataTransfer,P=o.default.eventSandbox.DragDataStore,C=r.default.positionUtils,O=r.default.domUtils,R=r.default.styleUtils,I=r.default.eventUtils,M=r.default.promiseUtils,U=r.default.sendRequestToFrame,N="automation|move|request",D="automation|move|response";x.on(x.SERVICE_MSG_RECEIVED_EVENT,function(e){e.message.cmd===N&&(e.source.parent===F?B.onMoveToIframeRequest(e):(o.default.on(o.default.EVENTS.beforeUnload,function(){return x.sendServiceMsg({cmd:D},e.source)}),B.onMoveOutRequest(e)))});var k=null,B=function(){function h(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),this.touchMode=b.isTouchDevice,this.moveEvent=this.touchMode?"touchmove":"mousemove",this.holdLeftButton=t.holdLeftButton,this.dragElement=null,this.dragAndDropState=new f.default,this.automationSettings=new c.default(t.speed);var n=h.getTarget(e,t.offsetX,t.offsetY);this.element=n.element,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=t.speed,this.cursorSpeed=this.holdLeftButton?this.automationSettings.draggingSpeed:this.automationSettings.cursorSpeed,this.minMovingTime=t.minMovingTime||null,this.modifiers=t.modifiers||{},this.skipScrolling=t.skipScrolling,this.skipDefaultDragBehavior=t.skipDefaultDragBehavior,this.endPoint=null,this.movingTime=null,this.x=null,this.y=null,this.startTime=null,this.endTime=null,this.distanceX=null,this.distanceY=null,this.firstMovingStepOccured=!1}return h.getTarget=function(e,t,n){var o=!C.containsOffset(e,t,n),r=o?(0,s.default)(e,t,n):{x:t,y:n};return{element:o?j.documentElement:e,offsetX:r.x,offsetY:r.y}},h.onMoveToIframeRequest=function(e){var t={x:e.message.endX,y:e.message.endY},n=e.source,o=O.findIframeByWindow(n),r=R.getBordersWidth(o),i=R.getElementPadding(o),s=C.getIframeClientCoordinates(o),l=C.getIframePointRelativeToParentFrame(t,n),a=m.default.position,u=C.isInRectangle(a,s)?a:(0,E.default)(a,l,s),c={x:u.x-s.left,y:u.y-s.top},f=new h(o,new p.MoveOptions({modifiers:e.message.modifiers,offsetX:c.x+r.left+i.left,offsetY:c.y+r.top+i.top,speed:e.message.speed,skipScrolling:!0},!1)),d={cmd:D,x:c.x,y:c.y};m.default.activeWindow!==n?f.run().then(function(){m.default.activeWindow=n,x.sendServiceMsg(d,n)}):x.sendServiceMsg(d,n)},h.onMoveOutRequest=function(e){var t=e.source,n={left:e.message.left,right:e.message.right,top:e.message.top,bottom:e.message.bottom};if(!e.message.iframeUnderCursor){var o=e.message,r=o.startX,i=o.startY,s=r-n.left,l=i-n.top;return k&&(A.mouseout(k,{clientX:s,clientY:l,relatedTarget:null}),A.mouseleave(k,{clientX:s,clientY:l,relatedTarget:null})),void x.sendServiceMsg({cmd:D},t)}var a=m.default.position,u={x:n.left+a.x,y:n.top+a.y},c={x:e.message.endX,y:e.message.endY},f=(0,E.default)(u,c,n);if(f){var d=new p.MoveOptions({modifiers:e.message.modifiers,offsetX:f.x-n.left,offsetY:f.y-n.top,speed:e.message.speed,skipScrolling:!0},!1);new h(j.documentElement,d).run().then(function(){var e={cmd:D,x:f.x,y:f.y};m.default.activeWindow=t,x.sendServiceMsg(e,t)})}else x.sendServiceMsg({cmd:D,x:n.left,y:n.top},t)},h.prototype._getTargetClientPoint=function(){var e=R.getElementScroll(this.element);if(O.isHtmlElement(this.element))return{x:Math.floor(this.offsetX-e.left),y:Math.floor(this.offsetY-e.top)};var t=C.getClientPosition(this.element),n=this.element.tagName&&O.isBodyElement(this.element);return{x:Math.floor(n?t.x+this.offsetX:t.x+this.offsetX-e.left),y:Math.floor(n?t.y+this.offsetY:t.y+this.offsetY-e.top)}},h.prototype._emulateEvents=function(e){var t=this.holdLeftButton?I.BUTTONS_PARAMETER.leftButton:I.BUTTONS_PARAMETER.noButton,n=(0,l.default)({x:this.x,y:this.y}),o={clientX:this.x,clientY:this.y,screenX:n.x,screenY:n.y,buttons:t,ctrl:this.modifiers.ctrl,alt:this.modifiers.alt,shift:this.modifiers.shift,meta:this.modifiers.meta,dataTransfer:this.dragAndDropState.dataTransfer},r=(this.dragAndDropState.enabled?this.firstMovingStepOccured?g.default:v.default:d.default).run(e,k,o,this.moveEvent,this.dragElement,this.dragAndDropState.dataStore),i=r.dragAndDropMode,s=r.dropAllowed;this.firstMovingStepOccured=!0,this.dragAndDropState.enabled=i,this.dragAndDropState.dropAllowed=s,k=e},h.prototype._movingStep=function(){var n=this;if(this.touchMode&&!this.holdLeftButton)this.x=this.endPoint.x,this.y=this.endPoint.y;else if(this.startTime){var e=(Math.min(S.dateNow(),this.endTime)-this.startTime)/(this.endTime-this.startTime);this.x=Math.floor(this.startPoint.x+this.distanceX*e),this.y=Math.floor(this.startPoint.y+this.distanceY*e)}else this.startTime=S.dateNow(),this.endTime=this.startTime+this.movingTime,this.x+=0<this.distanceX?1:-1,this.y+=0<this.distanceY?1:-1;return m.default.move(this.x,this.y).then(a.underCursor).then(function(e){var t=n.holdLeftButton&&n.touchMode?n.dragElement:e;return t?n._emulateEvents(t):null}).then(u.default)},h.prototype._isMovingFinished=function(){return this.x===this.endPoint.x&&this.y===this.endPoint.y},h.prototype._move=function(){var e=this;return this.startPoint=m.default.position,this.x=this.startPoint.x,this.y=this.startPoint.y,this.distanceX=this.endPoint.x-this.startPoint.x,this.distanceY=this.endPoint.y-this.startPoint.y,this.movingTime=Math.max(Math.abs(this.distanceX),Math.abs(this.distanceY))/this.cursorSpeed,this.minMovingTime&&(this.movingTime=Math.max(this.movingTime,this.minMovingTime)),M.whilst(function(){return!e._isMovingFinished()},function(){return e._movingStep()})},h.prototype._scroll=function(){if(this.skipScrolling)return y.resolve();var e=new p.ScrollOptions({offsetX:this.offsetX,offsetY:this.offsetY},!1);return new i.default(this.element,e).run()},h.prototype._moveToCurrentFrame=function(){if(m.default.active)return y.resolve();var e=m.default.position,t=e.x,n=e.y,o=m.default.activeWindow,r=null,i=null,s=null,l={cmd:N,startX:t,startY:n,endX:this.endPoint.x,endY:this.endPoint.y,modifiers:this.modifiers,speed:this.speed};return o.parent===F&&(r=O.findIframeByWindow(o),s=C.getIframeClientCoordinates(r),l.left=s.left,l.top=s.top,l.right=s.right,l.bottom=s.bottom),(0,a.underCursor)().then(function(e){return i=e===r,o.parent===F&&(l.iframeUnderCursor=i),U(l,D,o)}).then(function(e){return m.default.activeWindow=F,i||F.top!==F?m.default.move(e.x,e.y):null})},h.prototype.run=function(){var l=this;return(0,a.underCursor)().then(function(e){l.dragElement=l.holdLeftButton?e:null;var t=function(e){for(var t=e;t;){if(t.draggable)return t;t=t.parentNode}return null}(l.dragElement);if(t&&b.hasDataTransfer&&!l.skipDefaultDragBehavior){l.dragAndDropState.enabled=!0,l.dragElement=t,l.dragAndDropState.element=l.dragElement,l.dragAndDropState.dataStore=new P,l.dragAndDropState.dataTransfer=new w(l.dragAndDropState.dataStore);var n=O.isAnchorElement(l.dragElement);if(n||O.isImgElement(l.dragElement)){var o=n?"href":"src",r=T.parseProxyUrl(l.dragElement[o]),i=r?r.destUrl:l.dragElement[o],s=_.cleanUpHtml(S.elementOuterHTMLGetter.call(l.dragElement));l.dragAndDropState.dataTransfer.setData("text/plain",i),l.dragAndDropState.dataTransfer.setData("text/uri-list",i),l.dragAndDropState.dataTransfer.setData("text/html",s)}}return l._scroll()}).then(function(){var e=l._getTargetClientPoint(),t=e.x,n=e.y,o=R.getWidth(F),r=R.getHeight(F);return 0<=t&&t<=o&&0<=n&&n<=r?(l.endPoint={x:t,y:n},l._moveToCurrentFrame().then(function(){return l._move()})):null}).then(function(){return l.dragAndDropState})},h}();e.default=B,t.exports=e.default}},press:{"index.js":function(e,t,n){e.__esModule=!0;var o=a(n("../../deps/hammerhead")),l=n("../../deps/testcafe-core"),i=a(n("./key-press-simulator")),u=a(n("./shortcuts")),s=n("./utils"),r=a(n("../../settings"));function a(e){return e&&e.__esModule?e:{default:e}}var c=o.default.Promise,f=o.default.utils.browser,d=o.default.eventSandbox.message,h=o.default.nativeMethods,p="automation|press|request",m="automation|press|response";d.on(d.SERVICE_MSG_RECEIVED_EVENT,function(e){e.message.cmd===p&&(o.default.on(o.default.EVENTS.beforeUnload,function(){return d.sendServiceMsg({cmd:m},e.source)}),new E(e.message.keyCombinations,e.message.options).run().then(function(){return d.sendServiceMsg({cmd:m},e.source)}))});var E=function(){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.keyCombinations=e,this.isSelectElement=!1,this.pressedKeyString="",this.modifiersState=null,this.shortcutHandlers=null,this.topSameDomainDocument=l.domUtils.getTopSameDomainWindow(F).document,this.automationSettings=new r.default(t.speed),this.options=t}return a._getKeyPressSimulators=function(e){var t=(0,l.getKeyArray)(e),n=(0,s.getActualKeysAndEventKeyProperties)(t),o=n.actualKeys,r=n.eventKeyProperties;return l.arrayUtils.map(o,function(e,t){return new i.default(e,r[t])})},a._getShortcuts=function(e){for(var t=(0,l.getKeyArray)(e.toLowerCase()),n=[],o=[],r=[],i=0;i<t.length;i++)for(o.push(t[i]),r=o.slice();r.length;){var s=r.join("+");u.default[s]?(n.push(s),o=r=[]):r.shift()}return n},a._getShortcutHandlers=function(e){for(var t=a._getShortcuts(e.toLowerCase()),n={},o="",r=null,i=null,s=null,l=0;l<t.length;l++)r=t[l],i=e.indexOf(r),s=r.length,n[o+=e.substring(0,i+s)]=u.default[r],e=e.substring(i+s);return n},a.prototype._down=function(e){this.pressedKeyString+=(this.pressedKeyString?"+":"")+e.key;var t=!e.down(this.modifiersState);return c.resolve(t)},a.prototype._press=function(e,t){var n=this;if(t&&!this.isSelectElement)return(0,l.delay)(this.automationSettings.keyActionStepDelay);var o=this.shortcutHandlers[this.pressedKeyString],r=!1;return o&&!f.isFirefox&&"enter"!==e.key||(r=!e.press(this.modifiersState)),r&&!this.isSelectElement||!o?(0,l.delay)(this.automationSettings.keyActionStepDelay):o((0,s.getDeepActiveElement)(this.topSameDomainDocument)).then(function(){return(0,l.delay)(n.automationSettings.keyActionStepDelay)})},a.prototype._up=function(e){return e.up(this.modifiersState),(0,l.delay)(this.automationSettings.keyActionStepDelay)},a.prototype._runCombination=function(e){var n=this;this.modifiersState={ctrl:!1,alt:!1,shift:!1,meta:!1},this.isSelectElement=l.domUtils.isSelectElement((0,s.getDeepActiveElement)(this.topSameDomainDocument)),this.pressedKeyString="",this.shortcutHandlers=a._getShortcutHandlers(e);var t=a._getKeyPressSimulators(e);return l.promiseUtils.each(t,function(t){return n._down(t).then(function(e){return n._press(t,e)})}).then(function(){return l.arrayUtils.reverse(t),l.promiseUtils.each(t,function(e){return n._up(e)})})},a.prototype.run=function(){var t=this,e=l.domUtils.getActiveElement(),n=l.domUtils.isIframeElement(e);if(F.top===F&&n&&h.contentWindowGetter.call(e)){var o={cmd:p,keyCombinations:this.keyCombinations,options:this.options};return(0,l.sendRequestToFrame)(o,m,h.contentWindowGetter.call(e))}return l.promiseUtils.each(this.keyCombinations,function(e){return t._runCombination(e).then(function(){return(0,l.delay)(t.automationSettings.keyActionStepDelay)})})},a}();e.default=E,t.exports=e.default},"key-press-simulator.js":function(e,t,n){e.__esModule=!0;var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=c(n("../../deps/hammerhead")),f=n("../../deps/testcafe-core"),a=c(n("../type/type-text")),d=n("./utils"),i=c(n("../../utils/get-key-code")),s=c(n("../../utils/get-key-identifier")),l=c(n("../../utils/is-letter")),u=c(n("../../utils/get-key-properties"));function c(e){return e&&e.__esModule?e:{default:e}}var h=r.default.utils.browser,p=r.default.utils.extend,m=r.default.eventSandbox.eventSimulator,E=function(){function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.isLetter=(0,l.default)(e),this.isChar=1===e.length||"space"===e,this.sanitizedKey=(0,f.getSanitizedKey)(e),this.modifierKeyCode=f.KEY_MAPS.modifiers[this.sanitizedKey],this.specialKeyCode=f.KEY_MAPS.specialKeys[this.sanitizedKey],this.keyCode=null,this.keyIdentifierProperty=(0,s.default)(t),this.topSameDomainDocument=f.domUtils.getTopSameDomainWindow(F).document,this.keyProperty=f.KEY_MAPS.keyProperty[t]||t,this.isChar&&"space"!==e?this.keyCode=(0,i.default)(this.sanitizedKey):this.modifierKeyCode?this.keyCode=this.modifierKeyCode:this.specialKeyCode&&(this.keyCode=this.specialKeyCode),this.storedActiveElement=null}return c._isKeyActivatedInputElement=function(e){return f.domUtils.isInputElement(e)&&/button|submit|reset|radio|checkbox/.test(e.type)},c.prototype._type=function(e,t){var n=e!==this.storedActiveElement,o=!n,r=e,i=f.domUtils.isEditableElement(e),s=f.domUtils.isEditableElement(this.storedActiveElement);try{if(n){var l=f.domUtils.isElementInIframe(e)===f.domUtils.isElementInIframe(this.storedActiveElement)||s;o=(!h.isFirefox||s)&&(!h.isWebKit||l)}}catch(e){}o&&(!h.isIE&&n&&s&&i&&(r=this.storedActiveElement),(0,a.default)(r,t))},c.prototype._addKeyPropertyToEventOptions=function(e){return p(e,(0,u.default)("keypress"===e.type,this.keyProperty,this.keyIdentifierProperty)),e},c.prototype.down=function(e){this.storedActiveElement=(0,d.getDeepActiveElement)(this.topSameDomainDocument),this.modifierKeyCode&&(e[this.sanitizedKey]=!0),e.shift&&this.isLetter&&(this.keyProperty=(0,d.changeLetterCase)(this.keyProperty));var t={keyCode:this.keyCode,type:"keydown"};return this._addKeyPropertyToEventOptions(t),m.keydown(this.storedActiveElement,p(t,e))},c.prototype.press=function(e){if(!this.isChar&&!this.specialKeyCode)return!0;var t=(0,d.getDeepActiveElement)(this.topSameDomainDocument),n=this.isChar?(0,d.getChar)(this.sanitizedKey,e.shift):null,o=this.specialKeyCode||n.charCodeAt(0),r=t!==this.storedActiveElement;if(h.isWebKit&&r&&f.domUtils.isElementInIframe(t)!==f.domUtils.isElementInIframe(this.storedActiveElement))return!0;this.storedActiveElement=t;var i={keyCode:o,charCode:o,type:"keypress"};this._addKeyPropertyToEventOptions(i);var s=m.keypress(t,p(i,e));if(!s)return s;t=(0,d.getDeepActiveElement)(this.topSameDomainDocument),!n||e.ctrl||e.alt||this._type(t,n);var l=c._isKeyActivatedInputElement(t),a=f.domUtils.isButtonElement(t),u=h.isSafari&&0<=h.compareVersions([h.webkitVersion,"603.1.30"]);return!h.isFirefox&&!u&&(l||a)&&"enter"===this.sanitizedKey&&t.click(),s},c.prototype.up=function(e){this.modifierKeyCode&&(e[this.sanitizedKey]=!1);var t={keyCode:this.keyCode,type:"keyup"};this._addKeyPropertyToEventOptions(t);var n=m.keyup((0,d.getDeepActiveElement)(this.topSameDomainDocument),p(t,e)),o=(0,d.getDeepActiveElement)(this.topSameDomainDocument);return!h.isFirefox&&!h.isSafari&&(!h.isChrome||53<=h.version)&&n&&"space"===this.sanitizedKey&&c._isKeyActivatedInputElement(o)&&o.click(),n},o(c,[{key:"key",get:function(){return this.sanitizedKey}}]),c}();e.default=E,t.exports=e.default},"shortcuts.js":function(e,t,n){e.__esModule=!0;var o=l(n("../../deps/hammerhead")),r=l(n("../../deps/testcafe-core")),i=l(n("../../deps/testcafe-ui")),s=n("./utils");function l(e){return e&&e.__esModule?e:{default:e}}var d=o.default.Promise,a=o.default.utils.browser,u=o.default.eventSandbox.eventSimulator,c=o.default.eventSandbox.elementEditingWatcher,h=r.default.textSelection,f=r.default.eventUtils,p=r.default.domUtils,m=i.default.selectElement,E=null,g=null;function v(){g=E=null,f.unbind(this,"blur",v,!0)}function y(e){var t,n,o,r;p.isTextAreaElement(e)&&(E!==e&&(f.bind(e,"blur",v,!0),E=e),t=e,n=h.hasInverseSelection(t),o=p.getTextAreaValue(t),r=n?h.getSelectionStart(t):h.getSelectionEnd(t),g=o&&r?p.getTextareaIndentInLine(t,r):0)}function S(e,t){var n=p.getTextAreaValue(e);if(n){var o=h.getSelectionStart(e),r=h.getSelectionEnd(e),i=h.hasInverseSelection(e),s=n.substring(0,i?o:r),l=s.lastIndexOf("\n"),a=s.substring(0,l);null!==g&&E===e||y(e),l=a.lastIndexOf("\n"),_(e,o,r,i,Math.min(l+1+g,a.length),t)}}function b(e,t){var n=p.getTextAreaValue(e);if(n){var o=h.getSelectionStart(e),r=h.getSelectionEnd(e),i=h.hasInverseSelection(e),s=i?o:r,l=n.substring(s),a=l.indexOf("\n"),u=-1===a?l.length:a+1,c=l.substring(u),f=s+u,d=-1===(a=c.indexOf("\n"))?c.length:a;null!==g&&E===e||y(e),_(e,o,r,i,f=Math.min(f+g,f+d),t)}}function _(e,t,n,o,r,i){var s=null,l=null;l=i?(s=t===n?t:o?n:t,r):s=r,h.select(e,s,l)}function T(e,t,n){p.isInputElement(e)&&"number"===e.type&&("-"===t.charAt(0)&&"."===t.charAt(1)&&(t=t.substring(1)),"."===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1))),p.setElementValue(e,t),h.select(e,n,n),u.input(e)}function A(e,t){if(p.isTextEditableElement(e)){var n=h.getSelectionStart(e),o=h.getSelectionEnd(e),r=h.hasInverseSelection(e),i=null,s=!p.isTextAreaElement(e)||p.getTextareaLineNumberByPosition(e,n)===p.getTextareaLineNumberByPosition(e,o);i=s?r?o:n:r?n:o;var l=p.getElementValue(e).substring(0,i).lastIndexOf("\n"),a=-1===l?0:l+1,u=null,c=null;s?(u=a,c=t?i:a,h.select(e,c,u)):r?h.select(e,o,a):h.select(e,n,a)}return d.resolve()}function x(e,t){if(p.isTextEditableElement(e)){var n=h.getSelectionStart(e),o=h.getSelectionEnd(e),r=h.hasInverseSelection(e),i=null,s=!p.isTextAreaElement(e)||p.getTextareaLineNumberByPosition(e,n)===p.getTextareaLineNumberByPosition(e,o);i=s?r?o:n:r?n:o;var l=p.getElementValue(e).substring(i),a=l.indexOf("\n"),u=i,c=null,f=null;u+=-1===a?l.length:a,s?(c=t?i:u,f=u,h.select(e,c,f)):r?h.select(e,o,u):h.select(e,n,u)}return d.resolve()}function w(e){return A(e,!0)}function P(e){return x(e,!0)}function C(e){return p.isRadioButtonElement(e)&&!a.isFirefox}function O(e,t){return R(e,t,!1).then(function(e){e&&(e.checked=!0)})}function R(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return e?(p.isSelectElement(e)&&m.collapseOptionList(),(0,s.focusNextElement)(e,t,n).then(function(e){return e&&p.isTextEditableInput(e)&&h.select(e),e})):d.resolve()}e.default={"ctrl+a":function(e){return p.isEditableElement(e)&&h.select(e),d.resolve()},backspace:function(e){if(p.isTextEditableElementAndEditingAllowed(e)){var t=h.getSelectionStart(e),n=h.getSelectionEnd(e),o=p.getElementValue(e).replace(/\r\n/g,"\n");n===t?0<t&&T(e,o.substring(0,t-1)+o.substring(n,o.length),t-1):T(e,o.substring(0,t)+o.substring(n,o.length),t)}return p.isContentEditableElement(e)&&h.deleteSelectionContents(e),d.resolve()},delete:function(e){if(p.isTextEditableElementAndEditingAllowed(e)){var t=h.getSelectionStart(e),n=h.getSelectionEnd(e),o=p.getElementValue(e).replace(/\r\n/g,"\n");n===t?t<o.length&&T(e,o.substring(0,t)+o.substring(n+1,o.length),t):T(e,o.substring(0,t)+o.substring(n,o.length),t)}return p.isContentEditableElement(e)&&h.deleteSelectionContents(e),d.resolve()},left:function(e){var t=null;if(p.isSelectElement(e)&&m.switchOptionsByKeys(e,"left"),C(e))return O(e,!0);if(p.isTextEditableElement(e)){var n=(t=h.getSelectionStart(e)||0)===h.getSelectionEnd(e)?t-1:t;h.select(e,n,n),y(e)}if(p.isContentEditableElement(e)&&(t=h.getSelectionStart(e))!==h.getSelectionEnd(e)){var o=h.getSelectionByElement(e),r=h.hasInverseSelectionContentEditable(e),i={node:r?o.focusNode:o.anchorNode,offset:r?o.focusOffset:o.anchorOffset};h.selectByNodesAndOffsets(i,i,!0)}return d.resolve()},right:function(e){var t=null,n=null;if(p.isSelectElement(e)&&m.switchOptionsByKeys(e,"right"),C(e))return O(e,!1);if(p.isTextEditableElement(e)){var o=(t=h.getSelectionStart(e))===(n=h.getSelectionEnd(e))?n+1:n;t===p.getElementValue(e).length&&(o=t),h.select(e,o,o),y(e)}if(p.isContentEditableElement(e)&&(t=h.getSelectionStart(e))!==(n=h.getSelectionEnd(e))){var r=h.getSelectionByElement(e),i=h.hasInverseSelectionContentEditable(e),s={node:i?r.anchorNode:r.focusNode,offset:i?r.anchorOffset:r.focusOffset};h.selectByNodesAndOffsets(s,s,!0)}return d.resolve()},up:function(e){return p.isSelectElement(e)&&m.switchOptionsByKeys(e,"up"),C(e)?O(e,!0):a.isWebKit&&p.isInputElement(e)?A(e):(p.isTextAreaElement(e)&&S(e,!1),d.resolve())},down:function(e){return p.isSelectElement(e)&&m.switchOptionsByKeys(e,"down"),C(e)?O(e,!1):a.isWebKit&&p.isInputElement(e)?x(e):(p.isTextAreaElement(e)&&b(e,!1),d.resolve())},"shift+left":function(e){if(p.isTextEditableElement(e)){var t=h.getSelectionStart(e),n=h.getSelectionEnd(e);t===n||h.hasInverseSelection(e)?h.select(e,n,Math.max(t-1,0)):h.select(e,t,Math.max(n-1,0)),y(e)}return d.resolve()},"shift+right":function(e){if(p.isTextEditableElement(e)){var t=h.getSelectionStart(e),n=h.getSelectionEnd(e),o=p.getElementValue(e).length;t!==n&&h.hasInverseSelection(e)?h.select(e,n,Math.min(t+1,o)):h.select(e,t,Math.min(n+1,o)),y(e)}return d.resolve()},"shift+up":function(e){return a.isWebKit&&p.isInputElement(e)?w(e):(p.isTextAreaElement(e)&&S(e,!0),d.resolve())},"shift+down":function(e){return a.isWebKit&&p.isInputElement(e)?P(e):(p.isTextAreaElement(e)&&b(e,!0),d.resolve())},"shift+home":w,"shift+end":P,home:A,end:x,enter:function(e){if(p.isSelectElement(e)&&m.collapseOptionList(),p.isInputElement(e)){a.isIE||c.processElementChanging(e);var t=p.getParents(e,"form")[0];t&&function(e,t){var n=e.querySelectorAll("input, button"),o=null,r=null;for(r=0;r<n.length;r++)if(!o&&"submit"===n[r].type&&!n[r].disabled){o=n[r];break}if(o)u.click(o);else if(p.blocksImplicitSubmission(t)){var i=e.getElementsByTagName("input"),s=[];for(r=0;r<i.length;r++)p.blocksImplicitSubmission(i[r])&&s.push(i[r]);1===s.length&&s[0]===t&&t.validity.valid&&u.submit(e)&&e.submit()}}(t,e)}else if(p.isTextAreaElement(e)){var n=h.getSelectionStart(e),o=p.getTextAreaValue(e),r=o.substring(0,n),i=o.substring(n),s=n+1;T(e,r+String.fromCharCode(10)+i,s)}else e.tagName&&p.isAnchorElement(e)&&u.click(e);return d.resolve()},tab:function(e){return R(e,!1)},"shift+tab":function(e){return R(e,!0)},esc:function(e){return p.isSelectElement(e)&&m.collapseOptionList(),d.resolve()}},t.exports=e.default},"utils.js":function(e,t,n){e.__esModule=!0,e.changeLetterCase=c,e.getActualKeysAndEventKeyProperties=function(e){for(var t=e.slice(),n=0;n<e.length;n++){var o=e[n];if("shift"===o.toLowerCase()){var r=e[n+1];if(!r)continue;d.KEY_MAPS.shiftMap[r]?e[n+1]=d.KEY_MAPS.shiftMap[r]:d.KEY_MAPS.reversedShiftMap[r]&&(t[n+1]=d.KEY_MAPS.reversedShiftMap[r])}!d.KEY_MAPS.shiftMap[o]||e[n-1]&&"shift"===e[n-1].toLowerCase()||(e[n]=d.KEY_MAPS.shiftMap[o],e.splice(n,0,"shift"),t.splice(n,0,"shift"),n++)}return{actualKeys:e,eventKeyProperties:t}},e.getChar=function(e,t){if("space"===e)return" ";if(t){if((0,r.default)(e))return c(e);if(d.KEY_MAPS.reversedShiftMap[e])return d.KEY_MAPS.reversedShiftMap[e]}return e},e.getDeepActiveElement=function e(t){var n=t||j,o=null,r=s.documentActiveElementGetter.call(n);if(r&&d.domUtils.isDomElement(r)||(r=n.body),r&&d.domUtils.isIframeElement(r)&&s.contentDocumentGetter.call(r))try{o=e(s.contentDocumentGetter.call(r))}catch(e){}return o||r},e.focusNextElement=function(n,o,r){return new u(function(e){var t=f(n,o,r);t?a.focus(t,function(){return e(t)}):e()})},e.getNextFocusableElement=f;var o=i(n("../../deps/hammerhead")),d=n("../../deps/testcafe-core"),r=i(n("../../utils/is-letter")),h=n("../../../core/utils/dom"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("../../../core/utils/array"));function i(e){return e&&e.__esModule?e:{default:e}}var s=o.default.nativeMethods,l=o.default.utils.browser,a=o.default.eventSandbox.focusBlur,u=o.default.Promise;function c(e){return e===e.toLowerCase()?e.toUpperCase():e.toLowerCase()}function m(e,t,n){if(!(0,h.isRadioButtonElement)(t))return e;if(!n&&!t.name&&!l.isChrome)return[t];var o,r,i=(o=t,r=null,n?""===o.name||l.isFirefox||(r=function(e){return!e.name||e===o||e.name!==o.name}):""!==o.name?r=function(e){return(0,h.isRadioButtonElement)(e)&&e.name===o.name}:l.isChrome&&(r=function(e){return(0,h.isRadioButtonElement)(e)&&!e.name}),r);return i&&(e=p.filter(e,i)),e}function f(e,t,n){var o=t?-1:1,r=d.domUtils.getFocusableElements((0,h.findDocument)(e),!0);r=m(r,e,n);var i,s,l,a,u,c=(0,h.isRadioButtonElement)(e),f=p.indexOf(r,e);return(t?0===f:f===r.length-1)?n||!c?j.body:r[r.length-1-f]:t&&-1===f?r[r.length-1]:(s=(i=r)[f+o],l=n,a=(0,h.isRadioButtonElement)(s)&&s.name&&!s.checked,u=null,l&&a&&(u=p.find(i,function(e){return(0,h.isRadioButtonElement)(e)&&e.name===s.name&&e.checked})),u||s)}}},"rclick.js":function(e,t,n){e.__esModule=!0;var o=u(n("../deps/hammerhead")),r=u(n("../deps/testcafe-core")),i=u(n("./visible-element-automation")),s=n("../utils/utils"),l=u(n("../cursor")),a=u(n("../utils/next-tick"));function u(e){return e&&e.__esModule?e:{default:e}}var c=o.default.Promise,f=o.default.utils.extend,d=o.default.utils.browser,h=o.default.eventSandbox.eventSimulator,p=r.default.domUtils,m=r.default.eventUtils,E=r.default.delay,g=function(o){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.modifiers=t.modifiers,n.caretPos=t.caretPos,n.eventState={simulateDefaultBehavior:!0,activeElementBeforeMouseDown:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o),r.prototype._mousedown=function(e){var t=this;return l.default.rightButtonDown().then(function(){t.eventState.activeElementBeforeMouseDown=p.getActiveElement(),t.eventState.simulateDefaultBehavior=h.mousedown(e.element,e.options)}).then(function(){return t._focus(e)})},r.prototype._focus=function(e){if(!1===this.simulateDefaultBehavior)return(0,a.default)();var t=p.isContentEditableElement(this.element)?this.element:e.element,n=!d.isIE||this.eventState.activeElementBeforeMouseDown===p.getActiveElement();return(0,s.focusAndSetSelection)(t,n,this.caretPos).then(function(){return(0,a.default)()})},r.prototype._mouseup=function(t){var e=this;return l.default.buttonUp().then(function(){return e._getElementForEvent(t)}).then(function(e){return h.mouseup(e,t.options)})},r.prototype._contextmenu=function(t){return this._getElementForEvent(t).then(function(e){h.contextmenu(e,t.options),p.isElementFocusable(e)||(0,s.focusByRelatedElement)(e)})},r.prototype.run=function(e){var r=this,i=null;return this._ensureElement(e).then(function(e){var t=e.element,n=e.clientPoint,o=e.devicePoint;return i={point:n,element:t,options:f({clientX:n.x,clientY:n.y,screenX:o.x,screenY:o.y,button:m.BUTTON.right},r.modifiers)},c.all([E(r.automationSettings.mouseActionStepDelay),r._mousedown(i)])}).then(function(){return r._mouseup(i)}).then(function(){return r._contextmenu(i)})},r}(i.default);e.default=g,t.exports=e.default},"scroll.js":function(e,t,n){e.__esModule=!0;var o,r=n("../deps/hammerhead"),i=(o=r)&&o.__esModule?o:{default:o},p=n("../deps/testcafe-core"),a=i.default.Promise,l=i.default.eventSandbox.message,u="automation|scroll|request",c="automation|scroll|response";l.on(l.SERVICE_MSG_RECEIVED_EVENT,function(e){if(e.message.cmd===u){var t=e.message,n=t.offsetX,o=t.offsetY,r=t.maxScrollMargin,i=p.domUtils.findIframeByWindow(e.source),s=new f(i,{offsetX:n,offsetY:o});s.maxScrollMargin=r,s.run().then(function(){return l.sendServiceMsg({cmd:c},e.source)})}});var f=function(){function h(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),this.element=e,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.scrollToCenter=t.scrollToCenter,this.skipParentFrames=t.skipParentFrames,this.maxScrollMargin={left:50,top:50}}return h.prototype._isScrollValuesChanged=function(e,t){return p.styleUtils.getScrollLeft(e)!==t.left||p.styleUtils.getScrollTop(e)!==t.top},h.prototype._setScroll=function(e,t){var n=t.left,o=t.top,r=p.domUtils.isHtmlElement(e)?p.domUtils.findDocument(e):e,i={left:p.styleUtils.getScrollLeft(r),top:p.styleUtils.getScrollTop(r)};n=Math.max(n,0),o=Math.max(o,0);var s=p.scrollController.waitForScroll();return p.styleUtils.setScrollLeft(r,n),p.styleUtils.setScrollTop(r,o),this._isScrollValuesChanged(r,i)?s:(s.cancel(),a.resolve())},h.prototype._getScrollToPoint=function(e,t,n){var o=t.x,r=t.y,i=Math.floor(e.width/2),s=Math.floor(Math.floor(e.height/2)),l=this.scrollToCenter?i:Math.min(n.left,i),a=this.scrollToCenter?s:Math.min(n.top,s),u=o>=e.scroll.left+e.width-l,c=o<=e.scroll.left+l,f=r>=e.scroll.top+e.height-a,d=r<=e.scroll.top+a,h=e.scroll.left,p=e.scroll.top;return u?h=o-e.width+l:c&&(h=o-l),f?p=r-e.height+a:d&&(p=r-a),{left:h,top:p}},h.prototype._getScrollToFullChildView=function(e,t,n){var o=null,r=null,i=e.width>=t.width,s=e.height>=t.height,l=p.positionUtils.calcRelativePosition(t,e);if(i){var a=e.width-t.width,u=Math.min(n.left,a);this.scrollToCenter&&(u=a/2),l.left<u?o=Math.round(e.scroll.left+l.left-u):l.right<u&&(o=Math.round(e.scroll.left+Math.min(l.left,-l.right)+u))}if(s){var c=e.height-t.height,f=Math.min(n.top,c);this.scrollToCenter&&(f=c/2),l.top<f?r=Math.round(e.scroll.top+l.top-f):l.bottom<f&&(r=Math.round(e.scroll.top+Math.min(l.top,-l.bottom)+f))}return{left:o,top:r}},h._getChildPoint=function(e,t,n){return{x:t.left-e.left+e.scroll.left+t.border.left+n.x,y:t.top-e.top+e.scroll.top+t.border.top+n.y}},h.prototype._getScrollPosition=function(e,t,n,o){var r=h._getChildPoint(e,t,n),i=this._getScrollToPoint(e,r,o),s=this._getScrollToFullChildView(e,t,o);return{left:Math.max(null===s.left?i.left:s.left,0),top:Math.max(null===s.top?i.top:s.top,0)}},h._getChildPointAfterScroll=function(e,t,n,o){return{x:Math.round(t.left+e.scroll.left-n.left+o.x),y:Math.round(t.top+e.scroll.top-n.top+o.y)}},h.prototype._isChildFullyVisible=function(e,t,n){var o=h._getChildPointAfterScroll(e,t,e.scroll,n),r=o.x,i=o.y,s=this._getScrollPosition(e,t,n,{left:0,top:0}),l=s.left,a=s.top;return!this._isTargetElementObscuredInPoint(r,i)&&l===e.scroll.left&&a===e.scroll.top},h.prototype._scrollToChild=function(e,t,n){for(var o=p.positionUtils.getClientDimensions(e),r=p.positionUtils.getClientDimensions(t),i=p.styleUtils.getInnerWidth(F),s=p.styleUtils.getInnerHeight(F),l=o.scroll,a=!this._isChildFullyVisible(o,r,n);a;){l=this._getScrollPosition(o,r,n,this.maxScrollMargin);var u=h._getChildPointAfterScroll(o,r,l,n),c=u.x,f=u.y,d=this._isTargetElementObscuredInPoint(c,f);this.maxScrollMargin.left+=20,this.maxScrollMargin.left>=i&&(this.maxScrollMargin.left=50,this.maxScrollMargin.top+=20),a=d&&this.maxScrollMargin.top<s}return this.maxScrollMargin={left:50,top:50},this._setScroll(e,l)},h.prototype._scrollElement=function(){if(!p.styleUtils.hasScroll(this.element))return a.resolve();var e=p.positionUtils.getClientDimensions(this.element),t=this._getScrollToPoint(e,{x:this.offsetX,y:this.offsetY},this.maxScrollMargin);return this._setScroll(this.element,t)},h.prototype._scrollParents=function(){var t=this,n=p.styleUtils.getScrollableParents(this.element),o=this.element,r=this.offsetX-Math.round(p.styleUtils.getScrollLeft(o)),i=this.offsetY-Math.round(p.styleUtils.getScrollTop(o)),s=null,l=null;return p.promiseUtils.times(n.length,function(e){return t._scrollToChild(n[e],o,{x:r,y:i}).then(function(){s=p.positionUtils.getClientDimensions(o),l=p.positionUtils.getClientDimensions(n[e]),r+=s.left-l.left+l.border.left,i+=s.top-l.top+l.border.top,o=n[e]})}).then(function(){return F.top===F||t.skipParentFrames?a.resolve():(0,p.sendRequestToFrame)({cmd:u,offsetX:r,offsetY:i,maxScrollMargin:t.maxScrollMargin},c,F.parent)})},h._getFixedAncestorOrSelf=function(e){return p.domUtils.findParent(e,!0,p.styleUtils.isFixedElement)},h.prototype._isTargetElementObscuredInPoint=function(e,t){var n=p.positionUtils.getElementFromPoint(e,t);if(!n)return!1;var o=h._getFixedAncestorOrSelf(n);return o&&!o.contains(this.element)},h.prototype.run=function(){var e=this;return this._scrollElement().then(function(){return e._scrollParents()})},h}();e.default=f,t.exports=e.default},select:{"base.js":function(e,t,n){e.__esModule=!0;var o=d(n("../../deps/hammerhead")),r=d(n("../../deps/testcafe-core")),i=d(n("../visible-element-automation")),s=n("../../get-element"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./utils")),a=d(n("../move")),u=n("../../../../test-run/commands/options"),c=d(n("../../cursor")),f=d(n("../../errors"));function d(e){return e&&e.__esModule?e:{default:e}}var h=o.default.Promise,p=o.default.utils.browser,m=o.default.utils.featureDetection,E=o.default.eventSandbox.eventSimulator,g=o.default.eventSandbox.focusBlur,v=r.default.contentEditable,y=r.default.domUtils,S=r.default.positionUtils,b=r.default.eventUtils,_=r.default.delay,T=function(o){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.absoluteStartPoint=null,n.absoluteEndPoint=null,n.clientPoint=null,n.speed=t.speed,n.downEvent=m.isTouchDevice?"touchstart":"mousedown",n.upEvent=m.isTouchDevice?"touchend":"mouseup",n.eventArgs={options:null,element:null},n.eventState={mousedownPrevented:!1,simulateDefaultBehavior:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o),r._calculateEventArguments=function(e){var n=S.offsetToClientCoords(e);return(0,s.fromPoint)(n.x,n.y).then(function(e){var t=e.element;if(!t)throw new Error(f.default.elementIsInvisibleError);return{element:t,options:{clientX:n.x,clientY:n.y}}})},r.prototype._move=function(e){var t=this,n=e.element,o=e.offsetX,r=e.offsetY,i=e.speed,s=new u.MoveOptions({offsetX:o,offsetY:r,speed:i},!1);return new a.default(n,s).run().then(function(){return _(t.automationSettings.mouseActionStepDelay)})},r.prototype._bindMousedownHandler=function(){var n=this;b.bind(this.element,"mousedown",function e(t){n.eventState.mousedownPrevented=t.defaultPrevented,b.preventDefault(t),b.unbind(n.element,"mousedown",e)})},r.prototype._calculateAbsoluteStartPoint=function(){throw new Error("Not implemented")},r.prototype._calculateAbsoluteEndPoint=function(){throw new Error("Not implemented")},r.prototype._moveToPoint=function(e){l.scrollEditableElementByPoint(this.element,e),this.clientPoint=l.excludeElementScroll(this.element,e);var t={element:j.documentElement,offsetX:this.clientPoint.x,offsetY:this.clientPoint.y,speed:this.speed};return this._move(t)},r.prototype._mousedown=function(){var n=this;return c.default.leftButtonDown().then(function(){return r._calculateEventArguments(n.clientPoint)}).then(function(e){n.eventArgs=e;var t=(p.isWebKit||p.isIE)&&y.isSelectElement(n.element);return t&&n._bindMousedownHandler(),n.eventState.simulateDefaultBehavior=E[n.downEvent](n.eventArgs.element,n.eventArgs.options),!1===n.eventState.simulateDefaultBehavior&&(n.eventState.simulateDefaultBehavior=t&&!n.eventState.mousedownPrevented),n._focus()})},r.prototype._focus=function(){var n=this;return new h(function(e){var t=y.isContentEditableElement(n.element)?v.findContentEditableParent(n.element):n.element;g.focus(t,e,!1,!0)})},r.prototype._setSelection=function(){throw new Error("Not implemented")},r.prototype._mouseup=function(){var t=this;return c.default.buttonUp().then(function(){return t._setSelection(),r._calculateEventArguments(t.clientPoint)}).then(function(e){t.eventArgs=e,E[t.upEvent](t.eventArgs.element,t.eventArgs.options)})},r.prototype.run=function(){var e=this;return this.absoluteStartPoint=this._calculateAbsoluteStartPoint(),this.absoluteEndPoint=this._calculateAbsoluteEndPoint(),this._moveToPoint(this.absoluteStartPoint).then(function(){return e._mousedown()}).then(function(){return e._moveToPoint(e.absoluteEndPoint)}).then(function(){return e._mouseup()})},r}(i.default);e.default=T,t.exports=e.default},"calculate-select-text-arguments.js":function(e,t,n){e.__esModule=!0,e.default=function(e){var t,n,o,r,i,s,l,a,u,c,f,d,h,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=S.isTextEditableElement(e),E=m?0:b.getFirstVisiblePosition(e),g=m?S.getElementValue(e).length:b.getLastVisiblePosition(e),v=p.startPos?Math.min(p.startPos,g):E,y=void 0===p.endPos||null===p.endPos?g:Math.min(p.endPos,g);return void 0!==p.offset?(y=0<=p.offset?Math.min(p.offset,y):(v=y,Math.max(0,y+p.offset)),{startPos:v,endPos:y}):void 0!==p.startLine?(t=e,n=p,o=S.getTextAreaValue(t),r=o&&o.length?o.split("\n"):[],i=r.length-1,s=n.startLine?Math.min(n.startLine,i):0,l=r[s]?r[s].length:0,a=n.startPos?Math.min(n.startPos,l):0,u=void 0===n.endLine||null===n.endLine?i:Math.min(n.endLine,i),c=r[u]?r[u].length:0,f=void 0===n.endPos||null===n.endPos?c:Math.min(n.endPos,c),d=S.getTextareaPositionByLineAndOffset(t,s,0),h=S.getTextareaPositionByLineAndOffset(t,u,0),{startPos:d+a,endPos:h+f}):{startPos:v,endPos:y}};var o,r=n("../../deps/testcafe-core"),i=(o=r)&&o.__esModule?o:{default:o},S=i.default.domUtils,b=i.default.contentEditable;t.exports=e.default},"select-editable-content.js":function(e,t,n){e.__esModule=!0;var o=s(n("../../deps/testcafe-core")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./utils")),i=s(n("./base"));function s(e){return e&&e.__esModule?e:{default:e}}var l=o.default.textSelection,f=o.default.contentEditable,a=o.default.positionUtils,u=function(u){function c(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,u.call(this,f.getNearestCommonAncestor(e,t),n)),r=f.getFirstVisiblePosition(e),i=f.getLastVisiblePosition(t),s={node:e,offset:r},l={node:t,offset:i},a=f.calculatePositionByNodeAndOffset(o.element,s);return f.calculatePositionByNodeAndOffset(o.element,l)<a&&(r=f.getLastVisiblePosition(e),i=f.getFirstVisiblePosition(t)),s=f.calculateNodeAndOffsetByPosition(e,r),l=f.calculateNodeAndOffsetByPosition(t,i),o.startNode=s.node,o.startOffset=s.offset,o.endNode=l.node,o.endOffset=l.offset,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,u),c.prototype._calculateAbsoluteStartPoint=function(){return r.getSelectionCoordinatesByNodeAndOffset(this.element,this.startNode,this.startOffset)||a.findCenter(this.element)},c.prototype._calculateAbsoluteEndPoint=function(){return r.getSelectionCoordinatesByNodeAndOffset(this.element,this.endNode,this.endOffset)||a.findCenter(this.element)},c.prototype._setSelection=function(){if(!1!==this.eventState.simulateDefaultBehavior){var e={node:this.startNode,offset:this.startOffset},t={node:this.endNode,offset:this.endOffset};l.selectByNodesAndOffsets(e,t,!0)}},c}(i.default);e.default=u,t.exports=e.default},"select-text.js":function(e,t,n){e.__esModule=!0;var o=i(n("../../deps/testcafe-core")),r=i(n("./base")),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./utils"));function i(e){return e&&e.__esModule?e:{default:e}}var a=o.default.textSelection,u=o.default.domUtils,c=o.default.positionUtils,s=function(i){function s(e,t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,o));return r.startPos=t,r.endPos=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i),s.prototype._calculateAbsoluteStartPoint=function(){return l.getSelectionCoordinatesByPosition(this.element,this.startPos)||c.findCenter(this.element)},s.prototype._calculateAbsoluteEndPoint=function(){var e=l.getSelectionCoordinatesByPosition(this.element,this.endPos);return e||(u.isContentEditableElement(this.element)?l.getLastVisibleSelectionPosition(this.element,this.startPos,this.endPos):c.findCenter(this.element))},s.prototype._setSelection=function(){var e=u.isTextEditableElement(this.element),t=u.isContentEditableElement(this.element);(e||t)&&!1!==this.eventState.simulateDefaultBehavior&&a.select(this.element,this.startPos,this.endPos)},s.prototype.run=function(e){var t=this;return this._ensureElement(e).then(function(){return i.prototype.run.call(t)})},s}(r.default);e.default=s,t.exports=e.default},"utils.js":function(e,t,n){e.__esModule=!0,e.getSelectionCoordinatesByPosition=function(e,t){var n=h.isTextEditableElement(e),o=h.isContentEditableElement(e);return n&&0<h.getElementValue(e).length||o&&c.getContentEditableValue(e).length?s(e,t):p.findCenter(e)},e.getSelectionCoordinatesByNodeAndOffset=function(e,t,n){var o=h.findDocument(e).createRange();o.setStart(t,Math.min(n,t.length)),o.setEnd(t,Math.min(n,t.length));var r=o.getClientRects()[0];return r?{x:(r=v(r=g(e,r))).left,y:Math.floor(r.top+(r.bottom-r.top)/2)}:null},e.getLastVisibleSelectionPosition=function(e,t,n){for(var o=n<t?1:-1,r=n,i=null;r!==t&&!(i=s(e,r+=o)););return i||(i=s(e,t)||p.findCenter(e)),i},e.scrollEditableElementByPoint=function(e,t){if(h.isEditableElement(e)){var n=h.isTextAreaElement(e);if(!h.isInputElement(e)||!(u.isFirefox||u.isIE&&10<u.version)){var o=p.getOffsetPosition(e),r=m.getBordersWidth(e),i=m.getElementScroll(e),s=t.x-o.left-r.left,l=t.y-o.top-r.top,a=null;if(n)return l<i.top&&(a=l),l>e.clientHeight+i.top&&(a=l-e.clientHeight),void(null!==a&&m.setScrollTop(e,Math.round(a)));s<i.left&&(a=s),s>e.clientWidth+i.left&&(a=s-e.clientWidth),null!==a&&m.setScrollLeft(e,Math.round(a))}}},e.excludeElementScroll=function(e,t){var n=h.isTextEditableElement(e),o=h.isInputElement(e);if(!n&&!h.isContentEditableElement(e))return t;var r=p.getOffsetPosition(e),i=m.getBordersWidth(e),s=m.getElementScroll(e),l=r.left+i.left+e.clientWidth;return o&&n&&(u.isFirefox||u.isIE&&10<u.version)?{x:Math.min(t.x,l),y:t.y}:{x:t.x-s.left,y:t.y-s.top}};var f=r(n("../../deps/hammerhead")),o=r(n("../../deps/testcafe-core"));function r(e){return e&&e.__esModule?e:{default:e}}var u=f.default.utils.browser,h=o.default.domUtils,p=o.default.positionUtils,m=o.default.styleUtils,c=o.default.contentEditable,d=o.default.arrayUtils,E=["direction","font-family","font-size","font-size-adjust","font-variant","font-weight","font-style","letter-spacing","line-height","text-align","text-indent","text-transform","word-wrap","word-spacing","padding-top","padding-left","padding-right","padding-bottom","margin-top","margin-left","margin-right","margin-bottom","border-top-width","border-left-width","border-right-width","border-bottom-width"];function g(e,t){var n=m.getBordersWidth(e),o=p.getOffsetPosition(e),r=e.scrollHeight||e.getBoundingClientRect().height,i=Math.ceil(t.left),s=Math.ceil(t.top),l=Math.floor(t.bottom);if(!h.isTextAreaElement(e)){var a=p.offsetToClientCoords({x:o.left,y:o.top}),u=a.x+n.left+1,c=a.y+n.top+1,f=a.y+n.top+n.bottom+r,d=a.y+n.top+r-1;i=Math.ceil(i<=a.x?u:t.left),s=Math.ceil(s<=a.y?c:t.top),l=Math.floor(f<=l?d:t.bottom)}return{left:i,top:s,bottom:l}}function v(e){var t=m.getElementScroll(j);return{left:e.left+t.left,top:e.top+t.top,bottom:e.bottom+t.top}}function y(e,t){var n=e.getBoundingClientRect(),o=function(t){var e=j.body,n=p.getOffsetPosition(t),o=m.getElementMargin(t),r=n.top-o.top,i=n.left-o.left,s=j.createElement("div"),l="white-space:pre-wrap;border-style:solid;";if("absolute"===m.get(e,"position")){var a=m.getElementMargin(e),u=m.get(e,"left"),c=m.get(e,"top");i-=a.left+(parseInt(u.replace("px",""),10)||0),r-=a.top+(parseInt(c.replace("px",""),10)||0)}return d.forEach(E,function(e){l+=e+":"+m.get(t,e)+";"}),m.set(s,{cssText:l,position:"absolute",left:i+"px",top:r+"px",width:t.scrollWidth+"px",height:t.scrollHeight+"px"}),f.default.nativeMethods.nodeTextContentSetter.call(s,h.getElementValue(t)+" "),e.appendChild(s),s}(e),r=null,i=e.getBoundingClientRect(),s=i.top-n.top,l=i.left-n.left,a=h.getElementValue(e).length;try{var u=j.createRange();u.setStart(f.default.nativeMethods.nodeFirstChildGetter.call(o),Math.min(t,a)),u.setEnd(f.default.nativeMethods.nodeFirstChildGetter.call(o),Math.min(t+1,a+1)),h.isTextAreaElement(e)?0===(r=u.getBoundingClientRect()).width&&0===r.height&&(r=u.getClientRects()[0]):r=u.getClientRects()[0]}catch(e){r=null}return h.remove(o),r?{width:r.width,height:r.height,top:r.top-s,bottom:r.bottom-s,left:r.left-l,right:r.right-l}:null}function s(e,t){var n,o,r,i,s,l,a=null;return(a=h.isContentEditableElement(e)?(r=e,i=t,s=h.findDocument(r).createRange(),l=c.calculateNodeAndOffsetByPosition(r,i),s.setStart(l.node,Math.min(l.offset,l.node.length)),s.setEnd(l.node,Math.min(l.offset,l.node.length)),s.getClientRects()[0]):"function"==typeof e.createTextRange?(n=t,(o=e.createTextRange()).collapse(!0),o.moveStart("character",n),o.moveEnd("character",n),o.collapse(!0),o.getBoundingClientRect()):y(e,t))?{x:(a=v(a=g(e,a))).left,y:Math.floor(a.top+(a.bottom-a.top)/2)}:null}}},type:{"index.js":function(e,t,n){e.__esModule=!0;var o=i(n("../../deps/hammerhead")),r=i(n("../../deps/testcafe-core")),c=n("../../../../test-run/commands/options"),f=i(n("../click")),l=i(n("./type-text")),s=i(n("../../utils/get-key-code")),a=i(n("../../utils/get-key-identifier")),d=n("../../utils/offsets"),u=i(n("../../settings")),h=i(n("../../utils/get-key-properties"));function i(e){return e&&e.__esModule?e:{default:e}}var p=o.default.Promise,m=o.default.utils.extend,E=o.default.eventSandbox.eventSimulator,g=o.default.eventSandbox.elementEditingWatcher,v=r.default.domUtils,y=r.default.promiseUtils,S=r.default.contentEditable,b=r.default.textSelection,_=r.default.delay,T=r.default.KEY_MAPS.specialKeys,A=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.element=i.findTextEditableChild(e)||e,this.typingText=t.toString(),this.modifiers=n.modifiers,this.caretPos=n.caretPos,this.replace=n.replace,this.paste=n.paste,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=n.speed,this.automationSettings=new u.default(this.speed),this.elementChanged=e!==this.element,this.currentPos=0,this.currentKeyCode=null,this.currentCharCode=null,this.currentKey=null,this.currentKeyIdentifier=null,this.eventArgs={options:null,element:null},this.eventState={skipType:!1,simulateKeypress:!0,simulateTypeChar:!0}}return i.findTextEditableChild=function(e){var t=null;if(!v.isEditableElement(e))for(var n=e.querySelectorAll("*"),o=0;o<n.length;o++)if(v.isTextEditableElementAndEditingAllowed(n[o])){t=n[o];break}return t},i.prototype._calculateEventArguments=function(e){var t=v.getActiveElement(),n=v.isContentEditableElement(this.element),o=this.eventArgs.element||this.element;n||t===o||(o=i.findTextEditableChild(t)||t);var r=m({keyCode:e?this.currentCharCode:this.currentKeyCode},this.modifiers);return e&&(r.charCode=this.currentCharCode),m(r,(0,h.default)(e,this.currentKey,this.currentKeyIdentifier)),{element:o,options:r}},i.prototype._calculateTargetElement=function(){var e=v.getActiveElement(),t=v.isContentEditableElement(this.element);if(t){if(e!==S.findContentEditableParent(this.element))return void(this.eventState.skipType=!0)}else if(e!==this.element)return void(this.eventState.skipType=!0);this.element=t?this.element:e},i.prototype._click=function(e){var t=this,n=v.getActiveElement(),o=v.isTextEditableElementAndEditingAllowed(this.element),r=v.isContentEditableElement(this.element);if(n!==this.element){var i=(0,d.getDefaultAutomationOffsets)(this.element),s=i.offsetX,l=i.offsetY,a=new c.ClickOptions({offsetX:this.elementChanged?s:this.offsetX,offsetY:this.elementChanged?l:this.offsetY,speed:this.speed,caretPos:this.caretPos,modifiers:this.modifiers});return new f.default(this.element,a).run(e).then(function(){return _(t.automationSettings.mouseActionStepDelay)})}if(o&&g.watchElementEditing(this.element),o||r){var u=b.getSelectionStart(this.element);isNaN(parseInt(this.caretPos,10))||this.caretPos===u||b.select(this.element,this.caretPos,this.caretPos)}return p.resolve()},i.prototype._type=function(){var e=this;if(this.eventState.skipType)return p.resolve();var t=v.isContentEditableElement(this.element);return this.replace&&(v.isTextEditableElementAndEditingAllowed(this.element)?b.select(this.element):t&&b.deleteSelectionContents(this.element,!0)),y.whilst(function(){return!e._isTypingFinished()},function(){return e._typingStep()})},i.prototype._isTypingFinished=function(){return this.currentPos===this.typingText.length},i.prototype._typingStep=function(){var e=this.typingText.charAt(this.currentPos);return this.currentKeyCode=(0,s.default)(e),this.currentCharCode=this.typingText.charCodeAt(this.currentPos),this.currentKey=this.currentKeyCode===T.enter?"Enter":e,this.currentKeyIdentifier=(0,a.default)(this.currentKey),this._keydown(),this._keypress(),this._keyup()},i.prototype._keydown=function(){this.eventArgs=this._calculateEventArguments(),this.eventState.simulateKeypress=E.keydown(this.eventArgs.element,this.eventArgs.options)},i.prototype._keypress=function(){!1!==this.eventState.simulateKeypress&&(this.eventArgs=this._calculateEventArguments(!0),this.eventState.simulateTypeChar=E.keypress(this.eventArgs.element,this.eventArgs.options))},i.prototype._keyup=function(){var e=this,t=this.eventArgs.element;this.eventArgs=this._calculateEventArguments();var n=v.isTextEditableElement(this.element),o=v.isContentEditableElement(this.element),r=this.paste||!n&&!o;return p.resolve().then(function(){return r?e._typeAllText(t):e._typeChar(t)}).then(function(){E.keyup(e.eventArgs.element,e.eventArgs.options),r?e.currentPos=e.typingText.length:e.currentPos++})},i.prototype._typeChar=function(e){if(!1===this.eventState.simulateKeypress||!1===this.eventState.simulateTypeChar)return g.restartWatchingElementEditing(e),_(this.automationSettings.keyActionStepDelay);var t=this.typingText.charAt(this.currentPos),n=/^\d$/.test(t),o=0===this.currentPos?null:this.typingText.charAt(this.currentPos-1);if(v.isInputElement(e)&&"number"===e.type){var r=b.getSelectionStart(e),i=v.getInputValue(e).length,s=/^\d/.test(this.typingText);if(!n&&(s||!("."===t||"-"===t&&i)||0!==r))return _(this.automationSettings.keyActionStepDelay);n&&("."===o||"-"===o&&!i)&&(t=o+t)}return(0,l.default)(e,t,null),_(this.automationSettings.keyActionStepDelay)},i.prototype._typeAllText=function(e){return(0,l.default)(e,this.typingText,this.caretPos),_(this.automationSettings.keyActionStepDelay)},i.prototype.run=function(e){var t=this;return this._click(e).then(function(){return t._calculateTargetElement()}).then(function(){return t._type()})},i}();e.default=A,t.exports=e.default},"type-text.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){A.isContentEditableElement(e)&&function(e,t){var n=P(e),o=n.startPos.node,r=n.endPos.node,i=!0,s=!0,l=t;t=t.replace(w,String.fromCharCode(160));var a,u,c,f,d,h,p,m,E,g,v=function(){s=!1};function y(e,t,n){n()}o&&r&&A.isContentEditableElement(o)&&A.isContentEditableElement(r)&&(A.isTheSameNode(o,r)||(x.deleteSelectionContents(e),a=e,c=(u=n).startPos.node,f=c.parentNode&&c.parentElement,(b.isChrome&&b.version<58||b.isSafari||!f||!A.isElementContainsNode(a,c))&&(u=P(a),x.hasInverseSelectionContentEditable(a)&&(u={startPos:u.endPos,endPos:u.startPos})),u.endPos.offset=u.startPos.offset,o=(n=u).startPos.node),o&&A.isContentEditableElement(o)&&A.isRenderedNode(o)&&(i=O(e,l),s=i&&!b.isIE11,T.addInternalEventListener(F,["input"],v),T.addInternalEventListener(F,["textinput"],y),i&&(A.isElementNode(o)?(d=o,h=t,m=j.createTextNode(h),E=h.length,g={node:m,offset:E},"br"===A.getTagName(d)?d.parentNode.insertBefore(m,d):0<p?d.insertBefore(m,d.childNodes[p]):d.appendChild(m),x.selectByNodesAndOffsets(g,g)):function(e,t,n){var o=t.startPos.node;A.isElementContainsNode(e,o)||(t=C(P(e)),o=t.startPos.node);var r=t.startPos.offset,i=t.endPos.offset,s=o.nodeValue,l={node:o,offset:r+n.length};o.nodeValue=s.substring(0,r)+n+s.substring(i,s.length),x.selectByNodesAndOffsets(l,l)}(e,C(n),t)),(0,S.default)().then(function(){s&&_.input(e),T.removeInternalEventListener(F,["input"],v),T.removeInternalEventListener(F,["textinput"],y)})))}(e,t),A.isElementReadOnly(e)||(A.isTextEditableElement(e)?function(e,t){var n=A.getElementValue(e),o=t.length,r=x.getSelectionStart(e),i=x.getSelectionEnd(e),s=A.isInputElement(e)&&"number"===e.type;if(O(e,t)){var l=!b.isIE&&s?null:parseInt(e.maxLength,10);l<0&&(l=b.isIE&&b.version<17?0:null),(null===l||isNaN(l)||l>n.length)&&(s&&b.isIOS&&"."===n[n.length-1]&&(r+=1,i+=1),A.setElementValue(e,n.substring(0,r)+t+n.substring(i,n.length)),x.select(e,r+o,r+o)),_.input(e)}}(e,t):A.isInputElement(e)&&function(e,t,n){if(null!==n){var o=A.getElementValue(e);A.setElementValue(e,o.substr(0,n)+t+o.substr(n+t.length))}else A.setElementValue(e,t);_.change(e),_.input(e)}(e,t,n))};var o=i(n("../../deps/hammerhead")),r=i(n("../../deps/testcafe-core")),S=i(n("../../utils/next-tick"));function i(e){return e&&e.__esModule?e:{default:e}}var b=o.default.utils.browser,s=o.default.sandbox.event,_=o.default.eventSandbox.eventSimulator,T=o.default.eventSandbox.listeners,A=r.default.domUtils,l=r.default.contentEditable,x=r.default.textSelection,w=/ /g;function P(e){var t=x.getSelectionByElement(e),n=x.hasInverseSelectionContentEditable(e);return x.hasElementContainsSelection(e)?l.getSelection(e,t,n):{startPos:l.calculateNodeAndOffsetByPosition(e,0),endPos:l.calculateNodeAndOffsetByPosition(e,0)}}function C(e){var t=e.startPos.node,n=e.startPos.offset,o=e.endPos.offset,r=l.getFirstNonWhitespaceSymbolIndex(t.nodeValue),i=l.getLastNonWhitespaceSymbolIndex(t.nodeValue);return n<r&&0!==n?(e.startPos.offset=r,e.endPos.offset=o+r-n):i<o&&o!==t.nodeValue.length&&(e.startPos.offset=t.nodeValue.length,e.endPos.offset=o+t.nodeValue.length-n),e}function O(e,t){var n=void 0;function o(e){e.preventDefault(),n=!0}function r(e){"textInput"===e.type&&(n=!1)}b.isSafari&&(T.addInternalEventListener(F,["textInput"],o),s.on(s.EVENT_PREVENTED_EVENT,r));var i=b.isFirefox||_.textInput(e,t)||n;return b.isSafari&&(T.removeInternalEventListener(F,["textInput"],o),s.off(s.EVENT_PREVENTED_EVENT,r)),i||b.isIE11}t.exports=e.default}},"upload.js":function(e,t,n){e.__esModule=!0;var r=n("../deps/hammerhead"),i=n("../deps/testcafe-core"),o=function(){function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.element=e,this.paths=t,this.createError=n}return o.prototype.run=function(){var t=this;return(0,r.doUpload)(this.element,this.paths).then(function(e){if(e.length)throw t.createError(i.arrayUtils.map(e,function(e){return e.path}))})},o}();e.default=o,t.exports=e.default},"visible-element-automation.js":function(e,t,n){e.__esModule=!0;var o=r(n("../deps/hammerhead")),p=n("../deps/testcafe-core"),i=r(n("../utils/get-automation-point")),s=r(n("../utils/screen-point-to-client")),d=r(n("../utils/get-device-point")),l=n("../utils/offsets"),m=n("../get-element"),a=r(n("../errors")),u=r(n("../settings")),c=r(n("./scroll")),f=r(n("./move")),h=n("../../../test-run/commands/options");function r(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=o.default.utils.extend,v=function e(t){var n=t.element,o=void 0===n?null:n,r=t.clientPoint,i=void 0===r?null:r,s=t.screenPoint,l=void 0===s?null:s,a=t.isTarget,u=void 0!==a&&a,c=t.inMoving,f=void 0!==c&&c;E(this,e),this.element=o,this.clientPoint=i,this.screenPoint=l,this.isTarget=u,this.inMoving=f,this.devicePoint=(0,d.default)(i)},y=function(o){function r(e,t){E(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this));return n.TARGET_ELEMENT_FOUND_EVENT="automation|target-element-found-event",n.element=e,n.options=t,n.automationSettings=new u.default(t.speed),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o),r.prototype._getElementForEvent=function(e){var t=e.point,n=t.x,o=t.y,r=p.positionUtils.containsOffset(this.element,this.options.offsetX,this.options.offsetY)?this.element:null;return(0,m.fromPoint)(n,o,r).then(function(e){return e.element})},r.prototype._moveToElement=function(){var e=this,t=new h.MoveOptions(g({skipScrolling:!0},this.options),!1);return new f.default(this.element,t).run().then(function(){return(0,p.delay)(e.automationSettings.mouseActionStepDelay)})},r.prototype._scrollToElement=function(){var e=this;return new c.default(this.element,new h.ScrollOptions(this.options)).run().then(function(){return(0,p.delay)(e.automationSettings.mouseActionStepDelay)})},r.prototype._getElementOffset=function(){var e=(0,l.getOffsetOptions)(this.element),t=this.options,n=t.offsetX,o=t.offsetY;return{offsetX:n=n||0===n?n:e.offsetX,offsetY:o=o||0===o?o:e.offsetY}},r.prototype._wrapAction=function(e){var f=this,t=this._getElementOffset(),n=t.offsetX,o=t.offsetY,d=(0,i.default)(this.element,n,o),h=p.positionUtils.getClientPosition(this.element);return e().then(function(){var l=(0,i.default)(f.element,n,o),a=p.positionUtils.getClientPosition(f.element),u=(0,s.default)(f.element,l),c=p.positionUtils.containsOffset(f.element,n,o)?f.element:null;return(0,m.fromPoint)(u.x,u.y,c).then(function(e){var t=e.element,n=e.corrected,o=t;if(!o)return new v({});var r=!c||n||o===f.element;r||(r=-1<p.arrayUtils.indexOf(p.domUtils.getParents(o),f.element));var i=d.x!==l.x||d.y!==l.y,s=h.x!==a.x||h.y!==a.y;return new v({element:t,clientPoint:u,screenPoint:l,isTarget:r,inMoving:i&&s})})})},r._checkElementState=function(e,t){if(!e.element)throw new Error(a.default.elementIsInvisibleError);if(t&&(!e.isTarget||e.inMoving))throw new Error(a.default.foundElementIsNotTarget)},r.prototype._ensureElement=function(t,n){var o=this;return this._wrapAction(function(){return o._scrollToElement()}).then(function(e){return r._checkElementState(e,t)}).then(function(){return o._wrapAction(function(){return o._moveToElement()})}).then(function(e){return n||r._checkElementState(e,t),e}).then(function(e){return o.emit(o.TARGET_ELEMENT_FOUND_EVENT,{}),{element:e.element,clientPoint:e.clientPoint,screenPoint:e.screenPoint,devicePoint:e.devicePoint}})},r}(p.serviceUtils.EventEmitter);e.default=y,t.exports=e.default}},"settings.js":function(e,t,n){e.__esModule=!0;var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.speedFactor=e||1}return o(t,[{key:"mouseActionStepDelay",get:function(){return 1===this.speedFactor?10:400*(1-this.speedFactor)}},{key:"keyActionStepDelay",get:function(){return 1===this.speedFactor?10:200*(1-this.speedFactor)}},{key:"cursorSpeed",get:function(){return Math.pow(400,this.speedFactor)/4}},{key:"draggingSpeed",get:function(){return Math.pow(16,this.speedFactor)/4}}]),t}();e.default=r,t.exports=e.default},utils:{"get-automation-point.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){var o=a.isFirefox?Math.ceil:Math.round,r=l.positionUtils.getOffsetPosition(e,o),i=e===j.documentElement?0:r.left,s=e===j.documentElement?0:r.top;return{x:i+t,y:s+n}};var o,l=n("../deps/testcafe-core"),r=n("../deps/hammerhead"),a=((o=r)&&o.__esModule?o:{default:o}).default.utils.browser;t.exports=e.default},"get-device-point.js":function(e,t,n){e.__esModule=!0,e.default=function(e){if(!e)return null;var t=F.screenLeft||F.screenX,n=F.screenTop||F.screenY,o=t+e.x,r=n+e.y;return{x:o,y:r}},t.exports=e.default},"get-key-code.js":function(e,t,n){e.__esModule=!0,e.default=function(e){if((0,s.default)(e))return e.toUpperCase().charCodeAt(0);var t=r.KEY_MAPS.shiftMap[e]?r.KEY_MAPS.shiftMap[e].charCodeAt(0):e.charCodeAt(0);return r.KEY_MAPS.symbolCharCodeToKeyCode[t]||t};var o,r=n("../deps/testcafe-core"),i=n("./is-letter"),s=(o=i)&&o.__esModule?o:{default:o};t.exports=e.default},"get-key-identifier.js":function(e,t,n){e.__esModule=!0,e.default=function(e){return(0,r.default)(e)?o.default.LETTERS[e.toLowerCase()]:o.default.SYMBOLS[e]||o.default.SPECIAL_KEYS[e]||e};var o=i(n("./key-identifier-maps")),r=i(n("./is-letter"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=e.default},"get-key-properties.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){var o={};return"keyIdentifier"in KeyboardEvent.prototype&&(o.keyIdentifier=e?"":n),"key"in KeyboardEvent.prototype&&(o.key=t),o},t.exports=e.default},"get-line-rect-intersection.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){for(var o=[],r=null,i=[{x1:n.left,y1:n.top,x2:n.left,y2:n.bottom,isHorizontal:!1},{x1:n.right,y1:n.top,x2:n.right,y2:n.bottom,isHorizontal:!1},{x1:n.left,y1:n.top,x2:n.right,y2:n.top,isHorizontal:!0},{x1:n.left,y1:n.bottom,x2:n.right,y2:n.bottom,isHorizontal:!0}],s=0;s<i.length;s++)(r=a(e,t,i[s]))&&o.push(r);return o.length?1===o.length?o[0]:l(e,o[0])<l(e,o[1])?o[0]:o[1]:null};var i=n("../deps/testcafe-core");function l(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function a(e,t,n){var o=null;if(n.isHorizontal)return(o=i.positionUtils.getLineXByYCoord(e,t,n.y1))&&o>=n.x1&&o<=n.x2?{x:o,y:n.y1}:null;var r=i.positionUtils.getLineYByXCoord(e,t,n.x1);return r&&r>=n.y1&&r<=n.y2?{x:n.x1,y:r}:null}t.exports=e.default},"is-letter.js":function(e,t,n){e.__esModule=!0,e.default=function(e){return 1===e.length&&("a"<=e&&e<="z"||"A"<=e&&e<="Z")},t.exports=e.default},"key-identifier-maps.js":function(e,t,n){e.__esModule=!0,e.default={SPECIAL_KEYS:{capslock:"CapsLock",delete:"U+007F",end:"End",enter:"Enter",esc:"U+001B",home:"Home",ins:"Insert",pagedown:"PageDown",pageup:"PageUp",space:"U+0020",tab:"Tab",alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},LETTERS:{a:"U+0041",b:"U+0042",c:"U+0043",d:"U+0044",e:"U+0045",f:"U+0046",g:"U+0047",h:"U+0048",i:"U+0049",j:"U+004A",k:"U+004B",l:"U+004C",m:"U+004D",n:"U+004E",o:"U+004F",p:"U+0050",q:"U+0051",r:"U+0052",s:"U+0053",t:"U+0054",u:"U+0055",v:"U+0056",w:"U+0057",x:"U+0058",y:"U+0059",z:"U+005A"},SYMBOLS:{0:"U+0030",1:"U+0031",2:"U+0032",3:"U+0033",4:"U+0034",5:"U+0035",6:"U+0036",7:"U+0037",8:"U+0038",9:"U+0039"," ":"U+0020","!":"U+0021","@":"U+0040","#":"U+0023",$:"U+0024","%":"U+0025","^":"U+005E","*":"U+002A","(":"U+0028",")":"U+0029",_:"U+005F","|":"U+007C","\\":"U+005C","/":"U+002F","?":"U+003F",".":"U+002E",",":"U+002C","<":"U+003C",">":"U+003E","[":"U+005B","]":"U+005D","{":"U+007B","}":"U+007D","":"U+00A7","":"U+00B1","'":"U+0027",'"':"U+0022",":":"U+003A",";":"U+003B","`":"U+0060","~":"U+007E"}},t.exports=e.default},"next-tick.js":function(e,t,n){e.__esModule=!0,e.default=function(){return new s(function(e){return l.setTimeout.call(F,e,0)})};var o,r=n("../deps/hammerhead"),i=(o=r)&&o.__esModule?o:{default:o},s=i.default.Promise,l=i.default.nativeMethods;t.exports=e.default},"offsets.js":function(e,t,n){e.__esModule=!0,e.getDefaultAutomationOffsets=c,e.getOffsetOptions=function(e,t,n){var o=c(e);if(t="number"==typeof t?Math.round(t):o.offsetX,n="number"==typeof n?Math.round(n):o.offsetY,0<t&&0<n)return{offsetX:t,offsetY:n};var r=u.positionUtils.getClientDimensions(e),i=Math.round(Math.max(e.scrollWidth,r.width)),s=Math.round(Math.max(e.scrollHeight,r.height)),l=r.scrollbar.right+r.border.left+r.border.right+i,a=r.scrollbar.bottom+r.border.top+r.border.bottom+s;return{offsetX:t<0?l+t:t,offsetY:n<0?a+n:n}};var u=n("../deps/testcafe-core");function o(e){var t=e/2;return t<1?0:Math.round(t)}function c(e){var t=u.positionUtils.getElementRectangle(e);return{offsetX:o(t.width),offsetY:o(t.height)}}},"screen-point-to-client.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t){var n=o.styleUtils.getElementScroll(e);return!/html/i.test(e.tagName)&&o.styleUtils.hasScroll(e)&&(t.x-=n.left,t.y-=n.top),o.positionUtils.offsetToClientCoords(t)};var o=n("../deps/testcafe-core");t.exports=e.default},"utils.js":function(e,t,n){e.__esModule=!0,e.focusAndSetSelection=function(m,E,g){return new s(function(e){var t=T.getActiveElement(),n=T.isTextEditableElement(m),o=T.closest(m,"label[for]"),r=T.isElementFocusable(m),i=!T.isElementFocusable(m)&&o,s=T.isContentEditableElement(m),l=s?b.findContentEditableParent(m):m;if(E&&y.isWebKit&&n&&_.select(m,0,0),i)return E&&A(o),void e();var a=!E,u=!1;if(!r&&!s){var c=T.findDocument(l),f=v.documentActiveElementGetter.call(c),d=T.isBodyElement(f),h=T.isBodyElement(l)?l:T.getFocusableParent(l),p=f&&!d&&T.containsElement(f,l);if(p||d&&T.isBodyElement(h))return void e();l=h||c.body,u=!0}S.focus(l,function(){!E||s||m===T.getActiveElement()?(function(e,t){var n=T.isTextEditableElement(e),o=T.isContentEditableElement(e);if(n||o)if(o&&isNaN(parseInt(t,10)))_.setCursorToLastVisiblePosition(e);else{var r=isNaN(parseInt(t,10))?T.getElementValue(e).length:t;_.select(e,r,r)}else{var i=b.findContentEditableParent(e);i&&_.setCursorToLastVisiblePosition(b.findContentEditableParent(i))}}(m,g),E||T.getActiveElement()===t?e():S.focus(t,e,!0,!0)):e()},a,!0,!1,u)})},e.focusByRelatedElement=A;var o=i(n("../deps/hammerhead")),r=i(n("../deps/testcafe-core"));function i(e){return e&&e.__esModule?e:{default:e}}var s=o.default.Promise,v=o.default.nativeMethods,y=o.default.utils.browser,S=o.default.eventSandbox.focusBlur,b=r.default.contentEditable,_=r.default.textSelection,T=r.default.domUtils;function A(e){var t=T.closest(e,"label[for]");if(t){var n=j.getElementById(t.getAttribute("for"));n&&T.getActiveElement()!==n&&S.focus(n,r.default.noop,!1,!0)}}}}},core:{deps:{"hammerhead.js":function(e,t,n){e.__esModule=!0,e.default=F["%hammerhead%"],t.exports=e.default}},utils:{"array.js":function(e,t,n){e.__esModule=!0,e.toArray=function(e){for(var t=[],n=e.length,o=0;o<n;o++)t.push(e[o]);return t},e.reverse=function(e){return f.call(e)},e.isArray=function(e){return"[object Array]"===i.default.nativeMethods.objectToString.call(e)},e.find=function(e,t){for(var n=e.length,o=0;o<n;o++)if(t(e[o],o,e))return e[o];return null},e.indexOf=p,e.forEach=function(e,t){l.call(e,t)},e.some=function(e,t){return a.call(e,t)},e.map=function(e,t){return u.call(e,t)},e.filter=function(e,t){return c.call(e,t)},e.reduce=function(e,t,n){return d.call(e,t,n)},e.remove=function(e,t){var n=p(e,t);-1<n&&h.call(e,n,1)},e.equals=function(e,t){if(e.length!==t.length)return!1;for(var n=0,o=e.length;n<o;n++)if(e[n]!==t[n])return!1;return!0},e.getCommonElement=function(e,t){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)if(e[n]===t[o])return e[n];return null};var o,r=n("../deps/hammerhead"),i=(o=r)&&o.__esModule?o:{default:o},s=Array.prototype.indexOf,l=Array.prototype.forEach,a=Array.prototype.some,u=Array.prototype.map,c=Array.prototype.filter,f=Array.prototype.reverse,d=Array.prototype.reduce,h=Array.prototype.splice;function p(e,t){return s.call(e,t)}},"dom.js":function(e,t,n){e.__esModule=!0,e.isRadioButtonElement=e.getTopSameDomainWindow=e.findParent=e.getParents=e.closest=e.getTagName=e.getMapContainer=e.getScrollbarSize=e.isElementReadOnly=e.isHammerheadAttr=e.isElementFocusable=e.isShadowUIElement=e.isDomElement=e.isContentEditableElement=e.isTextEditableElementAndEditingAllowed=e.isTextEditableElement=e.isTextEditableInput=e.isWindow=e.isDocument=e.isHtmlElement=e.isBodyElement=e.isMapElement=e.isSVGElement=e.isOptionElement=e.isSelectElement=e.isFormElement=e.isImgElement=e.isAnchorElement=e.isTextAreaElement=e.isFileInput=e.isButtonElement=e.isInputElement=e.isIframeElement=e.isRenderedNode=e.isTextNode=e.isElementNode=e.getSelectVisibleChildren=e.getChildVisibleIndex=e.getSelectParent=e.isCrossDomainWindows=e.getIframeByElement=e.isElementInIframe=e.isElementInDocument=e.findDocument=e.getActiveElement=void 0,e.getFocusableElements=C,e.containsElement=O,e.getTextareaIndentInLine=function(e,t){var n=M(e);if(!n)return 0;var o=n.substring(0,t),r=-1===o.lastIndexOf("\n")?0:o.lastIndexOf("\n")+1;return t-r},e.getTextareaLineNumberByPosition=function(e,t){for(var n=M(e).split("\n"),o=0,r=0,i=0;o<=t;i++){if(t<=o+n[i].length){r=i;break}o+=n[i].length+1}return r},e.getTextareaPositionByLineAndOffset=function(e,t,n){for(var o=M(e).split("\n"),r=0,i=0;i<t;i++)r+=o[i].length+1;return r+n},e.blocksImplicitSubmission=function(e){return(E.isSafari?/^(text|password|color|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i:E.isFirefox?/^(text|password|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i:E.isIE?/^(text|password|color|date|time|datetime|datetime-local|email|file|month|number|search|tel|url|week|image)$/i:/^(text|password|datetime|email|number|search|tel|url|image)$/i).test(e.type)},e.isEditableElement=function(e,t){return t?f(e)||h(e):c(e)||h(e)},e.isElementContainsNode=function(e,t){var r=!1;return function e(t,n){(r||R(n,t))&&(r=!0);for(var o=0;o<t.childNodes.length;o++)if(r=e(t.childNodes[o],n))return r;return r}(e,t)},e.isOptionGroupElement=function(e){return"[object HTMLOptGroupElement]"===i.default.utils.dom.instanceToString(e)},e.getElementIndexInParent=function(e,t){var n=e.querySelectorAll(b(t));return m.indexOf(n,t)},e.isTheSameNode=R,e.getElementDescription=function(e){var t={id:"id",name:"name",class:"className"},n=[];for(var o in n.push("<"),n.push(b(e)),t)if(t.hasOwnProperty(o)){var r=e[t[o]];r&&n.push(" "+o+'="'+r+'"')}return n.push(">"),n.join("")},e.getFocusableParent=function(e){for(var t=_(e),n=0;n<t.length;n++)if(S(t[n]))return t[n];return null},e.remove=function(e){e&&e.parentElement&&e.parentElement.removeChild(e)},e.isIFrameWindowInDOM=function(t){if(!t.setTimeout)return!1;var e=null;try{e=t.frameElement}catch(e){return!!t.top}return!(!E.isFirefox&&!E.isWebKit||t.top===t||e)||!(!e||!d.contentDocumentGetter.call(e))},e.isTopWindow=function(e){try{return e.top===e}catch(e){return!1}},e.findIframeByWindow=function(e,t){for(var n=(t||F).document.getElementsByTagName("iframe"),o=0;o<n.length;o++)if(d.contentWindowGetter.call(n[o])===e)return n[o];return null},e.isEditableFormElement=function(e){return c(e)||u(e)},e.getCommonAncestor=function(e,t){if(R(e,t))return e;for(var n=[e].concat(_(e)),o=t;o;){if(-1<m.indexOf(n,o))return o;o=o.parentNode}return o},e.getChildrenLength=function(e){return d.htmlCollectionLengthGetter.call(e)},e.getChildNodesLength=function(e){return d.nodeListLengthGetter.call(e)},e.getInputValue=I,e.getTextAreaValue=M,e.setInputValue=U,e.setTextAreaValue=N,e.getElementValue=function(e){return l(e)?I(e):a(e)?M(e):e.value},e.setElementValue=function(e,t){return l(e)?U(e,t):a(e)?N(e,t):e.value=t};var o,r=n("../deps/hammerhead"),i=(o=r)&&o.__esModule?o:{default:o},p=s(n("./style")),m=s(n("./array"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var E=i.default.utils.browser,d=i.default.nativeMethods,g=(e.getActiveElement=i.default.utils.dom.getActiveElement,e.findDocument=i.default.utils.dom.findDocument,e.isElementInDocument=i.default.utils.dom.isElementInDocument,e.isElementInIframe=i.default.utils.dom.isElementInIframe,e.getIframeByElement=i.default.utils.dom.getIframeByElement,e.isCrossDomainWindows=i.default.utils.dom.isCrossDomainWindows,e.getSelectParent=i.default.utils.dom.getSelectParent,e.getChildVisibleIndex=i.default.utils.dom.getChildVisibleIndex,e.getSelectVisibleChildren=i.default.utils.dom.getSelectVisibleChildren,e.isElementNode=i.default.utils.dom.isElementNode,e.isTextNode=i.default.utils.dom.isTextNode,e.isRenderedNode=i.default.utils.dom.isRenderedNode,e.isIframeElement=i.default.utils.dom.isIframeElement),l=e.isInputElement=i.default.utils.dom.isInputElement,a=(e.isButtonElement=i.default.utils.dom.isButtonElement,e.isFileInput=i.default.utils.dom.isFileInput,e.isTextAreaElement=i.default.utils.dom.isTextAreaElement),v=e.isAnchorElement=i.default.utils.dom.isAnchorElement,u=(e.isImgElement=i.default.utils.dom.isImgElement,e.isFormElement=i.default.utils.dom.isFormElement,e.isSelectElement=i.default.utils.dom.isSelectElement),y=e.isOptionElement=i.default.utils.dom.isOptionElement,c=(e.isSVGElement=i.default.utils.dom.isSVGElement,e.isMapElement=i.default.utils.dom.isMapElement,e.isBodyElement=i.default.utils.dom.isBodyElement,e.isHtmlElement=i.default.utils.dom.isHtmlElement,e.isDocument=i.default.utils.dom.isDocument,e.isWindow=i.default.utils.dom.isWindow,e.isTextEditableInput=i.default.utils.dom.isTextEditableInput,e.isTextEditableElement=i.default.utils.dom.isTextEditableElement),f=e.isTextEditableElementAndEditingAllowed=i.default.utils.dom.isTextEditableElementAndEditingAllowed,h=e.isContentEditableElement=i.default.utils.dom.isContentEditableElement,S=(e.isDomElement=i.default.utils.dom.isDomElement,e.isShadowUIElement=i.default.utils.dom.isShadowUIElement,e.isElementFocusable=i.default.utils.dom.isElementFocusable),b=(e.isHammerheadAttr=i.default.utils.dom.isHammerheadAttr,e.isElementReadOnly=i.default.utils.dom.isElementReadOnly,e.getScrollbarSize=i.default.utils.dom.getScrollbarSize,e.getMapContainer=i.default.utils.dom.getMapContainer,e.getTagName=i.default.utils.dom.getTagName),_=(e.closest=i.default.utils.dom.closest,e.getParents=i.default.utils.dom.getParents);function T(e){return m.filter(e,function(e){return 0<e.tabIndex})}function A(e){return m.filter(e,function(e){return e.tabIndex<=0})}function x(e){if(!e||!e.length)return[];var t=T(e),n=m.filter(e,function(e){return g(e)});if(!t.length)return n.length&&(e=w(e,n)),e;t=t.sort(P("tabIndex"));var o=A(e);return n.length?w(t,n).concat(w(o,n)):t.concat(o)}function w(e,t){var n,o,r=(o=T(n=t)).length?o.sort(P("tabIndex")).concat(A(n)):n,i=[],s=[],l=[],a=0;for(a=0;a<r.length;a++){try{l=C(d.contentDocumentGetter.call(r[a]))}catch(e){l=[]}s.push(x(l))}for(a=0;a<e.length;a++)if(i.push(e[a]),g(e[a]))if(E.isIE){i.pop();var u=s[m.indexOf(t,e[a])],c=T(u),f=A(u);c=c.sort(P("tabIndex")),(i=i.concat(c)).push(e[a]),i=i.concat(f)}else E.isWebKit&&s[m.indexOf(t,e[a])].length&&i.pop(),i=i.concat(s[m.indexOf(t,e[a])]);return i}function P(n){return function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0}}function C(e){for(var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.querySelectorAll("*"),o=function(e){for(var t=[],n=0;n<e.length;n++)"none"===p.get(e[n],"display")&&t.push(e[n]);return t}(n),r=/^(input|button|select|textarea)$/,i=[],s=null,l=null,a=null,u=!1,c=0;c<n.length;c++)if(s=n[c],l=b(s),d=void 0,null!==(d=s.getAttribute("tabIndex"))&&(d=parseInt(d,10),d=isNaN(d)?null:d),a=d,u=!1,!s.disabled&&"none"!==p.get(s,"display")&&"hidden"!==p.get(s,"visibility")&&!((E.isIE||E.isAndroid)&&y(s)||null!==a&&a<0)){r.test(l)?u=!0:E.isIE&&g(s)?i.push(s):v(s)&&s.hasAttribute("href")&&(u=""!==s.getAttribute("href")||!E.isIE||null!==a);var f=s.getAttribute("contenteditable");""!==f&&"true"!==f||(u=!0),null!==a&&(u=!0),u&&i.push(s)}var d,h=m.filter(i,function(e){return!O(o,e)});return t&&(h=x(h)),h}function O(e,t){return e.contains?e.contains(t):m.some(e,function(e){return e.contains(t)})}function R(e,t){return e&&t&&e.isSameNode?e.isSameNode(t):e===t}function I(e){return d.inputValueGetter.call(e)}function M(e){return d.textAreaValueGetter.call(e)}function U(e,t){return d.inputValueSetter.call(e,t)}function N(e,t){return d.textAreaValueSetter.call(e,t)}e.findParent=i.default.utils.dom.findParent,e.getTopSameDomainWindow=i.default.utils.dom.getTopSameDomainWindow,e.isRadioButtonElement=function(e){return l(e)&&"radio"===e.type}},"style.js":function(e,t,n){e.__esModule=!0,e.get=e.setScrollTop=e.setScrollLeft=e.getScrollTop=e.getScrollLeft=e.getInnerHeight=e.getInnerWidth=e.getHeight=e.getWidth=e.isSelectVisibleChild=e.isElementVisible=e.getSelectElementSize=e.getOptionHeight=e.getElementScroll=e.getElementPadding=e.getElementMargin=e.getComputedStyle=e.getBordersWidth=void 0,e.isFixedElement=function(e){return s.isElementNode(e)&&"fixed"===c(e,"position")},e.isNotVisibleNode=function(e){return!s.isRenderedNode(e)||m(e)||p(e)},e.getScrollableParents=function(e){var t=s.getParents(e);if(s.isElementInIframe(e)){var n=s.getParents(s.getIframeByElement(e));t.concat(n)}return(0,l.filter)(t,g)},e.hasScroll=g,e.hasDimensions=function(e){return e&&!(e.offsetHeight<=0&&e.offsetWidth<=0)},e.set=function(e,t,n){for(var o in"string"==typeof t&&a.set(e,t,n),t)t.hasOwnProperty(o)&&a.set(e,o,t[o])},e.getViewportDimensions=function(){return{width:v(F.innerWidth,j.documentElement.clientWidth,j.body.clientWidth),height:v(F.innerHeight,j.documentElement.clientHeight,j.body.clientHeight)}};var o,r=n("../deps/hammerhead"),i=(o=r)&&o.__esModule?o:{default:o},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./dom")),l=n("./array"),a=i.default.utils.style,u=i.default.utils.browser,c=(e.getBordersWidth=i.default.utils.style.getBordersWidth,e.getComputedStyle=i.default.utils.style.getComputedStyle,e.getElementMargin=i.default.utils.style.getElementMargin,e.getElementPadding=i.default.utils.style.getElementPadding,e.getElementScroll=i.default.utils.style.getElementScroll,e.getOptionHeight=i.default.utils.style.getOptionHeight,e.getSelectElementSize=i.default.utils.style.getSelectElementSize,e.isElementVisible=i.default.utils.style.isElementVisible,e.isSelectVisibleChild=i.default.utils.style.isVisibleChild,e.getWidth=i.default.utils.style.getWidth,e.getHeight=i.default.utils.style.getHeight,e.getInnerWidth=i.default.utils.style.getInnerWidth,e.getInnerHeight=i.default.utils.style.getInnerHeight,e.getScrollLeft=i.default.utils.style.getScrollLeft,e.getScrollTop=i.default.utils.style.getScrollTop,e.setScrollLeft=i.default.utils.style.setScrollLeft,e.setScrollTop=i.default.utils.style.setScrollTop,e.get=i.default.utils.style.get),f=/auto|scroll/i,d="visible",h=function(e){var t=c(e,"overflowX"),n=c(e,"overflowY"),o=f.test(t),r=f.test(n);return u.isIE&&(o=o||r&&t===d,r=r||o&&n===d),{scrollableHorizontally:o,scrollableVertically:r}},p=function(e){return!!(e=s.findParent(e,!0,function(e){return s.isElementNode(e)&&"hidden"===c(e,"visibility")}))},m=function(e){return!!(e=s.findParent(e,!0,function(e){return s.isElementNode(e)&&"none"===c(e,"display")}))};function E(e){var t=c(e,"overflowX"),n=c(e,"overflowY"),o=f.test(t),r=f.test(n),i=s.findDocument(e).documentElement;return(o||r)&&e.scrollHeight>i.scrollHeight}function g(e){var t=h(e),n=t.scrollableHorizontally,o=t.scrollableVertically;if(s.isBodyElement(e))return E(e);if(s.isHtmlElement(e))return function(e){var t=c(e,"overflowX"),n=c(e,"overflowY"),o=e.getElementsByTagName("body")[0];if("hidden"===t&&"hidden"===n)return!1;var r=e.scrollHeight>e.clientHeight,i=e.scrollWidth>e.clientWidth;if(r||i)return!0;if(o){if(E(o))return!1;var s=Math.min(e.clientWidth,o.clientWidth),l=Math.min(e.clientHeight,o.clientHeight);return o.scrollHeight>l||o.scrollWidth>s}return!1}(e);if(!n&&!o)return!1;var r=o&&e.scrollHeight>e.clientHeight;return n&&e.scrollWidth>e.clientWidth||r}function v(e,t,n){return e<t?n:e<n?t:Math.max(n,t)}}}}},errors:{"test-run":{"index.js":function(e,t,n){e.__esModule=!0,e.SetNativeDialogHandlerCodeWrongTypeError=e.UncaughtErrorInNativeDialogHandler=e.NativeDialogNotHandledError=e.CurrentIframeIsInvisibleError=e.CurrentIframeNotFoundError=e.CurrentIframeIsNotLoadedError=e.ActionIframeIsNotLoadedError=e.ActionElementNotIframeError=e.RoleSwitchInRoleInitializerError=e.ForbiddenCharactersInScreenshotPathError=e.InvalidElementScreenshotDimensionsError=e.WindowDimensionsOverflowError=e.ActionInvalidScrollTargetError=e.ActionElementIsNotFileInputError=e.ActionCannotFindFileToUploadError=e.ActionIncorrectKeysError=e.ActionRootContainerNotFoundError=e.ActionElementNonContentEditableError=e.ActionElementNotTextAreaError=e.ActionElementNonEditableError=e.ActionAdditionalSelectorMatchesWrongNodeTypeError=e.ActionAdditionalElementIsInvisibleError=e.ActionAdditionalElementNotFoundError=e.ActionSelectorMatchesWrongNodeTypeError=e.ActionElementIsInvisibleError=e.ActionElementNotFoundError=e.ActionSelectorError=e.ActionUnsupportedDeviceTypeError=e.SetTestSpeedArgumentError=e.ActionStringArrayElementError=e.ActionStringOrStringArrayArgumentError=e.ActionPositiveIntegerArgumentError=e.ActionRoleArgumentError=e.ActionIntegerArgumentError=e.ActionNullableStringArgumentError=e.ActionStringArgumentError=e.ActionOptionsTypeError=e.ActionSpeedOptionError=e.ActionBooleanArgumentError=e.ActionBooleanOptionError=e.ActionPositiveIntegerOptionError=e.ActionIntegerOptionError=e.AssertionUnawaitedPromiseError=e.AssertionWithoutMethodCallError=e.AssertionExecutableArgumentError=e.ExternalAssertionLibraryError=e.UncaughtExceptionError=e.UnhandledPromiseRejectionError=e.UncaughtErrorInCustomDOMPropertyCode=e.UncaughtErrorInClientFunctionCode=e.UncaughtNonErrorObjectInTestCode=e.UncaughtErrorInTestCode=e.UncaughtErrorOnPage=e.PageLoadError=e.CannotObtainInfoForElementSpecifiedBySelectorError=e.InvalidSelectorResultError=e.DomNodeClientFunctionResultError=e.ClientFunctionExecutionInterruptionError=e.MissingAwaitError=void 0;var l=n("../types");function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(t){c(this,e),this.code=t,this.isTestCafeError=!0,this.callsite=null},r=function(r){function i(e,t,n){c(this,i);var o=a(this,r.call(this,e));return o.optionName=t,o.actualValue=n,o}return u(i,r),i}(o),i=function(r){function i(e,t,n){c(this,i);var o=a(this,r.call(this,e));return o.argumentName=t,o.actualValue=n,o}return u(i,r),i}(o),s=(e.MissingAwaitError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.missingAwaitError));return t.callsite=e,t}return u(o,n),o}(o),e.ClientFunctionExecutionInterruptionError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.clientFunctionExecutionInterruptionError));return t.instantiationCallsiteName=e,t}return u(o,n),o}(o),e.DomNodeClientFunctionResultError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.domNodeClientFunctionResultError));return t.instantiationCallsiteName=e,t}return u(o,n),o}(o),function(i){function s(e,t){var n=t.apiFnChain,o=t.apiFnIndex;c(this,s);var r=a(this,i.call(this,e));return r.apiFnChain=n,r.apiFnIndex=o,r}return u(s,i),s}(o));e.InvalidSelectorResultError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.invalidSelectorResultError))}return u(t,e),t}(o),e.CannotObtainInfoForElementSpecifiedBySelectorError=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.cannotObtainInfoForElementSpecifiedBySelectorError,t));return n.callsite=e,n}return u(r,o),r}(s),e.PageLoadError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.pageLoadError));return t.errMsg=e,t}return u(o,n),o}(o),e.UncaughtErrorOnPage=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.uncaughtErrorOnPage));return n.errStack=e,n.pageDestUrl=t,n}return u(r,o),r}(o),e.UncaughtErrorInTestCode=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.uncaughtErrorInTestCode));return n.errMsg=String(e),n.callsite=t,n}return u(r,o),r}(o),e.UncaughtNonErrorObjectInTestCode=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.uncaughtNonErrorObjectInTestCode));return t.objType=typeof e,t.objStr=String(e),t}return u(o,n),o}(o),e.UncaughtErrorInClientFunctionCode=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.uncaughtErrorInClientFunctionCode));return n.errMsg=String(t),n.instantiationCallsiteName=e,n}return u(r,o),r}(o),e.UncaughtErrorInCustomDOMPropertyCode=function(r){function i(e,t,n){c(this,i);var o=a(this,r.call(this,l.TEST_RUN_ERRORS.uncaughtErrorInCustomDOMPropertyCode,t,n));return o.errMsg=String(t),o.property=n,o.instantiationCallsiteName=e,o}return u(i,r),i}(o),e.UnhandledPromiseRejectionError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.unhandledPromiseRejection));return t.errMsg=String(e),t}return u(o,n),o}(o),e.UncaughtExceptionError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.uncaughtException));return t.errMsg=String(e),t}return u(o,n),o}(o),e.ExternalAssertionLibraryError=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.externalAssertionLibraryError));return n.errMsg=String(e),n.callsite=t,n}return u(r,o),r}(o),e.AssertionExecutableArgumentError=function(r){function i(e,t,n){c(this,i);var o=a(this,r.call(this,l.TEST_RUN_ERRORS.assertionExecutableArgumentError,e,t));return o.errMsg=n,o}return u(i,r),i}(i),e.AssertionWithoutMethodCallError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.assertionWithoutMethodCallError));return t.callsite=e,t}return u(o,n),o}(o),e.AssertionUnawaitedPromiseError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.assertionUnawaitedPromiseError));return t.callsite=e,t}return u(o,n),o}(o),e.ActionIntegerOptionError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionIntegerOptionError,e,t))}return u(o,n),o}(r),e.ActionPositiveIntegerOptionError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionPositiveIntegerOptionError,e,t))}return u(o,n),o}(r),e.ActionBooleanOptionError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionBooleanOptionError,e,t))}return u(o,n),o}(r),e.ActionBooleanArgumentError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionBooleanArgumentError,e,t))}return u(o,n),o}(i),e.ActionSpeedOptionError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionSpeedOptionError,e,t))}return u(o,n),o}(r),e.ActionOptionsTypeError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionOptionsTypeError));return t.actualType=e,t}return u(o,n),o}(o),e.ActionStringArgumentError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionStringArgumentError,e,t))}return u(o,n),o}(i),e.ActionNullableStringArgumentError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionNullableStringArgumentError,e,t))}return u(o,n),o}(i),e.ActionIntegerArgumentError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionIntegerArgumentError,e,t))}return u(o,n),o}(i),e.ActionRoleArgumentError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionRoleArgumentError,e,t))}return u(o,n),o}(i),e.ActionPositiveIntegerArgumentError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionPositiveIntegerArgumentError,e,t))}return u(o,n),o}(i),e.ActionStringOrStringArrayArgumentError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionStringOrStringArrayArgumentError,e,t))}return u(o,n),o}(i),e.ActionStringArrayElementError=function(r){function i(e,t,n){c(this,i);var o=a(this,r.call(this,l.TEST_RUN_ERRORS.actionStringArrayElementError,e,t));return o.elementIndex=n,o}return u(i,r),i}(i),e.SetTestSpeedArgumentError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.setTestSpeedArgumentError,e,t))}return u(o,n),o}(i),e.ActionUnsupportedDeviceTypeError=function(n){function o(e,t){return c(this,o),a(this,n.call(this,l.TEST_RUN_ERRORS.actionUnsupportedDeviceTypeError,e,t))}return u(o,n),o}(i),e.ActionSelectorError=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.actionSelectorError));return n.selectorName=e,n.errMsg=t,n}return u(r,o),r}(o),e.ActionElementNotFoundError=function(t){function n(e){return c(this,n),a(this,t.call(this,l.TEST_RUN_ERRORS.actionElementNotFoundError,e))}return u(n,t),n}(s),e.ActionElementIsInvisibleError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementIsInvisibleError))}return u(t,e),t}(o),e.ActionSelectorMatchesWrongNodeTypeError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionSelectorMatchesWrongNodeTypeError));return t.nodeDescription=e,t}return u(o,n),o}(o),e.ActionAdditionalElementNotFoundError=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.actionAdditionalElementNotFoundError,t));return n.argumentName=e,n}return u(r,o),r}(s),e.ActionAdditionalElementIsInvisibleError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionAdditionalElementIsInvisibleError));return t.argumentName=e,t}return u(o,n),o}(o),e.ActionAdditionalSelectorMatchesWrongNodeTypeError=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.actionAdditionalSelectorMatchesWrongNodeTypeError));return n.argumentName=e,n.nodeDescription=t,n}return u(r,o),r}(o),e.ActionElementNonEditableError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementNonEditableError))}return u(t,e),t}(o),e.ActionElementNotTextAreaError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementNotTextAreaError))}return u(t,e),t}(o),e.ActionElementNonContentEditableError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionElementNonContentEditableError));return t.argumentName=e,t}return u(o,n),o}(o),e.ActionRootContainerNotFoundError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionRootContainerNotFoundError))}return u(t,e),t}(o),e.ActionIncorrectKeysError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionIncorrectKeysError));return t.argumentName=e,t}return u(o,n),o}(o),e.ActionCannotFindFileToUploadError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionCannotFindFileToUploadError));return t.filePaths=e,t}return u(o,n),o}(o),e.ActionElementIsNotFileInputError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementIsNotFileInputError))}return u(t,e),t}(o),e.ActionInvalidScrollTargetError=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.actionInvalidScrollTargetError));return n.properties=e?"scrollTargetY property":t?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}return u(r,o),r}(o),e.WindowDimensionsOverflowError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.windowDimensionsOverflowError));return t.callsite=e,t}return u(o,n),o}(o),e.InvalidElementScreenshotDimensionsError=function(i){function s(e,t){c(this,s);var n=a(this,i.call(this,l.TEST_RUN_ERRORS.invalidElementScreenshotDimensionsError)),o=e<=0,r=t<=0;return n.dimensions=o?r?(n.verb="are","width and height"):(n.verb="is","width"):(n.verb="is","height"),n}return u(s,i),s}(o),e.ForbiddenCharactersInScreenshotPathError=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.forbiddenCharactersInScreenshotPathError));return n.screenshotPath=e,n.forbiddenCharsList=t,n}return u(r,o),r}(o),e.RoleSwitchInRoleInitializerError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.roleSwitchInRoleInitializerError));return t.callsite=e,t}return u(o,n),o}(o),e.ActionElementNotIframeError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementNotIframeError))}return u(t,e),t}(o),e.ActionIframeIsNotLoadedError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionIframeIsNotLoadedError))}return u(t,e),t}(o),e.CurrentIframeIsNotLoadedError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.currentIframeIsNotLoadedError))}return u(t,e),t}(o),e.CurrentIframeNotFoundError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.currentIframeNotFoundError))}return u(t,e),t}(o),e.CurrentIframeIsInvisibleError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.currentIframeIsInvisibleError))}return u(t,e),t}(o),e.NativeDialogNotHandledError=function(o){function r(e,t){c(this,r);var n=a(this,o.call(this,l.TEST_RUN_ERRORS.nativeDialogNotHandledError));return n.dialogType=e,n.pageUrl=t,n}return u(r,o),r}(o),e.UncaughtErrorInNativeDialogHandler=function(r){function i(e,t,n){c(this,i);var o=a(this,r.call(this,l.TEST_RUN_ERRORS.uncaughtErrorInNativeDialogHandler));return o.dialogType=e,o.errMsg=t,o.pageUrl=n,o}return u(i,r),i}(o),e.SetNativeDialogHandlerCodeWrongTypeError=function(n){function o(e){c(this,o);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.setNativeDialogHandlerCodeWrongTypeError));return t.actualType=e,t}return u(o,n),o}(o)}},"types.js":function(e,t,n){e.__esModule=!0,e.TEST_RUN_ERRORS={uncaughtErrorOnPage:"E1",uncaughtErrorInTestCode:"E2",uncaughtNonErrorObjectInTestCode:"E3",uncaughtErrorInClientFunctionCode:"E4",uncaughtErrorInCustomDOMPropertyCode:"E5",unhandledPromiseRejection:"E6",uncaughtException:"E7",missingAwaitError:"E8",actionIntegerOptionError:"E9",actionPositiveIntegerOptionError:"E10",actionBooleanOptionError:"E11",actionSpeedOptionError:"E12",actionOptionsTypeError:"E14",actionBooleanArgumentError:"E15",actionStringArgumentError:"E16",actionNullableStringArgumentError:"E17",actionStringOrStringArrayArgumentError:"E18",actionStringArrayElementError:"E19",actionIntegerArgumentError:"E20",actionRoleArgumentError:"E21",actionPositiveIntegerArgumentError:"E22",actionSelectorError:"E23",actionElementNotFoundError:"E24",actionElementIsInvisibleError:"E26",actionSelectorMatchesWrongNodeTypeError:"E27",actionAdditionalElementNotFoundError:"E28",actionAdditionalElementIsInvisibleError:"E29",actionAdditionalSelectorMatchesWrongNodeTypeError:"E30",actionElementNonEditableError:"E31",actionElementNotTextAreaError:"E32",actionElementNonContentEditableError:"E33",actionElementIsNotFileInputError:"E34",actionRootContainerNotFoundError:"E35",actionIncorrectKeysError:"E36",actionCannotFindFileToUploadError:"E37",actionUnsupportedDeviceTypeError:"E38",actionIframeIsNotLoadedError:"E39",actionElementNotIframeError:"E40",actionInvalidScrollTargetError:"E41",currentIframeIsNotLoadedError:"E42",currentIframeNotFoundError:"E43",currentIframeIsInvisibleError:"E44",nativeDialogNotHandledError:"E45",uncaughtErrorInNativeDialogHandler:"E46",setTestSpeedArgumentError:"E47",setNativeDialogHandlerCodeWrongTypeError:"E48",clientFunctionExecutionInterruptionError:"E49",domNodeClientFunctionResultError:"E50",invalidSelectorResultError:"E51",cannotObtainInfoForElementSpecifiedBySelectorError:"E52",externalAssertionLibraryError:"E53",pageLoadError:"E54",windowDimensionsOverflowError:"E55",forbiddenCharactersInScreenshotPathError:"E56",invalidElementScreenshotDimensionsError:"E57",roleSwitchInRoleInitializerError:"E58",assertionExecutableArgumentError:"E59",assertionWithoutMethodCallError:"E60",assertionUnawaitedPromiseError:"E61"},e.RUNTIME_ERRORS={cannotCreateMultipleLiveModeRunners:"E1000",cannotRunLiveModeRunnerMultipleTimes:"E1001",browserDisconnected:"E1002",cannotRunAgainstDisconnectedBrowsers:"E1003",cannotEstablishBrowserConnection:"E1004",cannotFindBrowser:"E1005",browserProviderNotFound:"E1006",browserNotSet:"E1007",testSourcesNotSet:"E1008",noTestsToRun:"E1009",cannotFindReporterForAlias:"E1010",multipleStdoutReporters:"E1011",optionValueIsNotValidRegExp:"E1012",optionValueIsNotValidKeyValue:"E1013",invalidSpeedValue:"E1014",invalidConcurrencyFactor:"E1015",cannotDivideRemotesCountByConcurrency:"E1016",portsOptionRequiresTwoNumbers:"E1017",portIsNotFree:"E1018",invalidHostname:"E1019",cannotFindSpecifiedTestSource:"E1020",clientFunctionCodeIsNotAFunction:"E1021",selectorInitializedWithWrongType:"E1022",clientFunctionCannotResolveTestRun:"E1023",regeneratorInClientFunctionCode:"E1024",invalidClientFunctionTestRunBinding:"E1025",invalidValueType:"E1026",unsupportedUrlProtocol:"E1027",testControllerProxyCannotResolveTestRun:"E1028",timeLimitedPromiseTimeoutExpired:"E1029",cannotUseScreenshotPathPatternWithoutBaseScreenshotPathSpecified:"E1030",cannotSetVideoOptionsWithoutBaseVideoPathSpecified:"E1031",multipleAPIMethodCallForbidden:"E1032",invalidReporterOutput:"E1033",cannotReadSSLCertFile:"E1034",cannotPrepareTestsDueToError:"E1035",cannotParseRawFile:"E1036",testedAppFailedWithError:"E1037",unableToOpenBrowser:"E1038",requestHookConfigureAPIError:"E1039",forbiddenCharatersInScreenshotPath:"E1040",cannotFindFFMPEG:"E1041",compositeArgumentsError:"E1042"}}},"test-run":{commands:{"options.js":function(e,t,n){e.__esModule=!0,e.AssertionOptions=e.ResizeToFitDeviceOptions=e.DragToElementOptions=e.TypeOptions=e.MoveOptions=e.ClickOptions=e.MouseOptions=e.ElementScreenshotOptions=e.ScrollOptions=e.OffsetOptions=e.ActionOptions=e.speedOption=e.booleanOption=e.positiveIntegerOption=e.integerOption=void 0;var o,r=n("../../utils/assignable"),i=(o=r)&&o.__esModule?o:{default:o},s=n("./validations/factories"),l=n("../../errors/test-run");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=e.integerOption=(0,s.createIntegerValidator)(l.ActionIntegerOptionError),d=e.positiveIntegerOption=(0,s.createPositiveIntegerValidator)(l.ActionPositiveIntegerOptionError),h=e.booleanOption=(0,s.createBooleanValidator)(l.ActionBooleanOptionError),p=e.speedOption=(0,s.createSpeedValidator)(l.ActionSpeedOptionError),m=e.ActionOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.speed=null,n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return[{name:"speed",type:p}]},r}(i.default),E=e.OffsetOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.offsetX=null,n.offsetY=null,n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return o.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:f},{name:"offsetY",type:f}])},r}(m),g=(e.ScrollOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.scrollToCenter=!1,n.skipParentFrames=!1,n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return o.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:h},{name:"skipParentFrames",type:h}])},r}(E),e.ElementScreenshotOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.scrollTargetX=null,n.scrollTargetY=null,n.includeMargins=!1,n.includeBorders=!0,n.includePaddings=!0,n.crop={left:null,right:null,top:null,bottom:null},n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return o.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:f},{name:"scrollTargetY",type:f},{name:"crop.left",type:f},{name:"crop.right",type:f},{name:"crop.top",type:f},{name:"crop.bottom",type:f},{name:"includeMargins",type:h},{name:"includeBorders",type:h},{name:"includePaddings",type:h}])},r}(m),e.MouseOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return o.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:h},{name:"modifiers.alt",type:h},{name:"modifiers.shift",type:h},{name:"modifiers.meta",type:h}])},r}(E)),v=e.ClickOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.caretPos=null,n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return o.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:d}])},r}(g);e.MoveOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.speed=null,n.minMovingTime=null,n.holdLeftButton=!1,n.skipScrolling=!1,n.skipDefaultDragBehavior=!1,n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return o.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:h},{name:"skipDefaultDragBehavior",type:h}])},r}(g),e.TypeOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.replace=!1,n.paste=!1,n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return o.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:h},{name:"paste",type:h}])},r}(v),e.DragToElementOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this,e,t));return n.destinationOffsetX=null,n.destinationOffsetY=null,n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return o.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:f},{name:"destinationOffsetY",type:f}])},r}(g),e.ResizeToFitDeviceOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.portraitOrientation=!1,n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:h}]},r}(i.default),e.AssertionOptions=function(o){function r(e,t){a(this,r);var n=u(this,o.call(this));return n.timeout=void 0,n.allowUnawaitedPromise=!1,n._assignFrom(e,t),n}return c(r,o),r.prototype._getAssignableProperties=function(){return[{name:"timeout",type:d},{name:"allowUnawaitedPromise",type:h}]},r}(i.default)},validations:{"factories.js":function(e,t,n){function r(o){return function(e,t){var n=typeof t;if("number"!==n)throw new o(e,n);if(isNaN(t)||!isFinite(t)||t!==Math.floor(t))throw new o(e,t)}}e.__esModule=!0,e.createIntegerValidator=r,e.createPositiveIntegerValidator=function(n){var o=r(n);return function(e,t){if(o(e,t),t<0)throw new n(e,t)}},e.createBooleanValidator=function(o){return function(e,t){var n=typeof t;if("boolean"!==n)throw new o(e,n)}},e.createSpeedValidator=function(o){return function(e,t){var n=typeof t;if("number"!==n)throw new o(e,n);if(isNaN(t)||t<.01||1<t)throw new o(e,t)}}}}}},utils:{"assignable.js":function(e,t,n){e.__esModule=!0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},e.prototype._assignFrom=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var o=this._getAssignableProperties(),r=0;r<o.length;r++){for(var i=o[r],s=i.name,l=i.type,a=i.required,u=i.init,c=i.defaultValue,f=s.split("."),d=f.length-1,h=f[d],p=e,m=this,E=0;E<d&&p&&m;E++)p=p[f[E]],m=m[f[E]];if(m&&"defaultValue"in o[r]&&(m[s]=c),p&&m){var g=p[h];(void 0!==g||a)&&(t&&l&&l(s,g),m[h]=u?u(s,g,n):g)}}},e}();e.default=o,t.exports=e.default}}}}})("testcafe-release/src/client/automation/index")}(window);